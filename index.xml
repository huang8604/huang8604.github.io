<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>æ–‡éŸ¬çš„æ–‡æ¡£</title><link>https://huang8604.github.io/</link><description>ç®€å•è®°å½•å·¥ä½œæ€»ç»“ğŸ’¼ï¼Œå­¦ä¹ æ•´ç†ã€‚ğŸ’°ğŸº</description><generator>Hugo 0.154.4 &amp; FixIt v0.4.1</generator><language>zh-CN</language><managingEditor>huang8604@163.com (wentao)</managingEditor><webMaster>huang8604@163.com (wentao)</webMaster><lastBuildDate>Thu, 27 Nov 2025 02:36:48 +0000</lastBuildDate><atom:link href="https://huang8604.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Gerrit æ‰¹é‡+1 Add reviewer</title><link>https://huang8604.github.io/posts/gerrit-%E6%89%B9%E9%87%8F-1-add-reviewer/</link><pubDate>Thu, 27 Nov 2025 02:36:48 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/gerrit-%E6%89%B9%E9%87%8F-1-add-reviewer/</guid><description>&lt;p&gt;å¾ˆé«˜å…´èƒ½å¸®ä½ è§£å†³é—®é¢˜ï¼è¿™æ®µç»å†éå¸¸å…¸å‹ï¼Œæ¶µç›–äº† &lt;strong&gt;Gerrit å‘½ä»¤è¡Œæ“ä½œ&lt;/strong&gt;ã€&lt;strong&gt;SSH äº¤äº’æœºåˆ¶&lt;/strong&gt;ä»¥åŠ &lt;strong&gt;Shell è„šæœ¬ç¼–ç¨‹&lt;/strong&gt;çš„å‡ ä¸ªæ ¸å¿ƒå‘ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æ•´ä¸ªè¿‡ç¨‹çš„å¤ç›˜ä¸æŠ€æœ¯æ€»ç»“ï¼Œæ–¹ä¾¿ä½ æ—¥åæŸ¥é˜…ï¼š&lt;/p&gt;
&lt;h3 class="heading-element" id="-æœ€ç»ˆå¯è¿è¡Œçš„å®Œæ•´å‘½ä»¤"&gt;&lt;span&gt;ğŸš€ æœ€ç»ˆå¯è¿è¡Œçš„å®Œæ•´å‘½ä»¤&lt;/span&gt;
 &lt;a href="#-%e6%9c%80%e7%bb%88%e5%8f%af%e8%bf%90%e8%a1%8c%e7%9a%84%e5%ae%8c%e6%95%b4%e5%91%bd%e4%bb%a4" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;username æ›¿æ¢è‡ªå·±çš„ç”¨æˆ·å,éœ€è¦sshæäº¤å…¬é’¥&lt;/p&gt;
&lt;p&gt;æè®®é€šè¿‡ä¸‹é¢æŸ¥çœ‹æ˜¯å¦å¯ä»¥&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh -p 29418 username@172.17.2.20 gerrit query &amp;#34;owner:self status:open&amp;#34; --format=JSON&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€ç»ˆå‘½ä»¤&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh -p 29418 username@172.17.2.20 gerrit query \
 &amp;#34;owner:self status:open NOT label:Code-Review&amp;lt;=-1&amp;#34; \
 --current-patch-set --format=JSON \
| jq -r &amp;#39;select(.currentPatchSet) | &amp;#34;\(.id) \(.currentPatchSet.revision)&amp;#34;&amp;#39; \
| while read -r changeId commitSha; do
 echo &amp;#34;æ­£åœ¨å¤„ç†: $changeId&amp;#34;
 
 # 1. æ‰“åˆ† (ä½¿ç”¨ Commit SHA ç¡®ä¿å”¯ä¸€å®šä½)
 ssh -n -p 29418 username@172.17.2.20 gerrit review --code-review &amp;#43;1 &amp;#34;$commitSha&amp;#34;
 
 # 2. åŠ äºº (ä½¿ç”¨ Change-Id ç¡®ä¿å…¼å®¹æ€§)
 ssh -n -p 29418 username@172.17.2.20 gerrit set-reviewers \
 -a xxx@AAA.com \
 -a yyy@AAA.com \
 -a zzz@AAA.com \
 &amp;#34;$changeId&amp;#34;
done&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 class="heading-element" id="-é‡åˆ°çš„å‘ä¸è§£å†³æ–¹æ¡ˆ-technical-retrospective"&gt;&lt;span&gt;ğŸ’¡ é‡åˆ°çš„å‘ä¸è§£å†³æ–¹æ¡ˆ (Technical Retrospective)&lt;/span&gt;
 &lt;a href="#-%e9%81%87%e5%88%b0%e7%9a%84%e5%9d%91%e4%b8%8e%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-technical-retrospective" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­è§£å†³äº†ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦æŠ€æœ¯éšœç¢ï¼š&lt;/p&gt;
&lt;h4 class="heading-element" id="1-æŸ¥è¯¢è¯­æ³•çš„å‚æ•°å†²çª"&gt;&lt;span&gt;1. æŸ¥è¯¢è¯­æ³•çš„å‚æ•°å†²çª&lt;/span&gt;
 &lt;a href="#1-%e6%9f%a5%e8%af%a2%e8%af%ad%e6%b3%95%e7%9a%84%e5%8f%82%e6%95%b0%e5%86%b2%e7%aa%81" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;-label:Code-Review&amp;lt;=-1&lt;/code&gt; æ—¶æŠ¥é”™ &lt;code&gt;fatal: is not a valid option&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šSSH è¿œç¨‹æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œä¼šå°†ä»¥ &lt;code&gt;-&lt;/code&gt; å¼€å¤´çš„å­—ç¬¦ä¸²è¯¯åˆ¤ä¸ºå‘½ä»¤è¡Œé€‰é¡¹ï¼ˆOptionsï¼‰ï¼Œè€Œä¸æ˜¯æŸ¥è¯¢è¯­å¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ… è§£å†³&lt;/strong&gt;ï¼šå°† &lt;code&gt;-&lt;/code&gt; æ›¿æ¢ä¸ºå¤§å†™çš„ &lt;strong&gt;&lt;code&gt;NOT&lt;/code&gt;&lt;/strong&gt; å…³é”®å­—ï¼ˆGerrit æŸ¥è¯¢è¯­è¨€æ”¯æŒï¼‰ï¼Œé¿å…æ­§ä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class="heading-element" id="2-gerrit-ç‰ˆæœ¬å…¼å®¹æ€§ä¸-id-å®šä½"&gt;&lt;span&gt;2. Gerrit ç‰ˆæœ¬å…¼å®¹æ€§ä¸ ID å®šä½&lt;/span&gt;
 &lt;a href="#2-gerrit-%e7%89%88%e6%9c%ac%e5%85%bc%e5%ae%b9%e6%80%a7%e4%b8%8e-id-%e5%ae%9a%e4%bd%8d" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Gerrit v2.16 çš„ &lt;code&gt;gerrit review&lt;/code&gt; å‘½ä»¤ä¸æ”¯æŒåŒæ—¶åŠ  Reviewer (&lt;code&gt;--reviewer&lt;/code&gt; å‚æ•°æ— æ•ˆ)ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ•°å­— ID (å¦‚ &lt;code&gt;83376&lt;/code&gt;) æˆ– &lt;code&gt;ID,PatchSet&lt;/code&gt; æ ¼å¼æ—¶ï¼ŒæŠ¥ &lt;code&gt;no such change/patch set&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šæ—§ç‰ˆæœ¬ API é™åˆ¶ï¼›ä¸”æ•°å­— ID åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•ç²¾å‡†æ˜ å°„åˆ°å½“å‰çš„ Patch Setã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ… è§£å†³&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹†åˆ†åŠ¨ä½œ&lt;/strong&gt;ï¼šå°†æ“ä½œæ‹†åˆ†ä¸º &lt;code&gt;gerrit review&lt;/code&gt; (æ‰“åˆ†) å’Œ &lt;code&gt;gerrit set-reviewers&lt;/code&gt; (åŠ äºº)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾å‡†å®šä½&lt;/strong&gt;ï¼šæ‰“åˆ†æ—¶ä½¿ç”¨ &lt;strong&gt;Commit SHA&lt;/strong&gt;ï¼ˆç‰©ç†å”¯ä¸€ï¼‰ï¼ŒåŠ äººæ—¶ä½¿ç”¨ &lt;strong&gt;Change-Id&lt;/strong&gt;ï¼ˆé€»è¾‘å”¯ä¸€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class="heading-element" id="3-ssh-åå™¬æ ‡å‡†è¾“å…¥-the-ssh-loop-trap"&gt;&lt;span&gt;3. SSH åå™¬æ ‡å‡†è¾“å…¥ (The SSH Loop Trap)&lt;/span&gt;
 &lt;a href="#3-ssh-%e5%90%9e%e5%99%ac%e6%a0%87%e5%87%86%e8%be%93%e5%85%a5-the-ssh-loop-trap" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šè„šæœ¬åªå¤„ç†äº†åˆ—è¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•å°±åœæ­¢äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;while&lt;/code&gt; å¾ªç¯å†…éƒ¨æ‰§è¡Œ &lt;code&gt;ssh&lt;/code&gt; æ—¶ï¼ŒSSH é»˜è®¤ä¼šè¯»å–æ‰€æœ‰çš„ Standard Input (stdin)ã€‚è¿™æ„å‘³ç€å¾ªç¯é‡Œçš„ç¬¬ä¸€ä¸ª &lt;code&gt;ssh&lt;/code&gt; æŠŠç®¡é“é‡Œå‰©ä¸‹çš„ Change åˆ—è¡¨å…¨â€œåƒâ€å…‰äº†ï¼Œå¯¼è‡´ &lt;code&gt;while&lt;/code&gt; å¾ªç¯ä»¥ä¸ºæ²¡æœ‰æ•°æ®äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ… è§£å†³&lt;/strong&gt;ï¼šç»™å¾ªç¯å†…éƒ¨çš„ &lt;code&gt;ssh&lt;/code&gt; å‘½ä»¤æ·»åŠ  &lt;strong&gt;&lt;code&gt;-n&lt;/code&gt;&lt;/strong&gt; å‚æ•°ã€‚è¿™å‘Šè¯‰ SSHï¼šâ€œä¸è¦è¯»å–æ ‡å‡†è¾“å…¥ï¼Œåªç®¡æ‰§è¡Œå‘½ä»¤â€ã€‚è¿™æ · stdin é‡Œçš„æ•°æ®å°±èƒ½ä¿ç•™ç»™ &lt;code&gt;while&lt;/code&gt; å¾ªç¯ç»§ç»­è¯»å–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 class="heading-element" id="4-æ•°æ®è§£æéƒ¨åˆ†-"&gt;&lt;span&gt;4. &lt;strong&gt;æ•°æ®è§£æéƒ¨åˆ† (&lt;code&gt;| jq ...&lt;/code&gt;)&lt;/strong&gt;ï¼š&lt;/span&gt;
 &lt;a href="#4-%e6%95%b0%e6%8d%ae%e8%a7%a3%e6%9e%90%e9%83%a8%e5%88%86-" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;jq -r 'select(.number) | .number'&lt;/code&gt;ï¼š&lt;code&gt;gerrit query&lt;/code&gt; æœ€åä¼šè¾“å‡ºä¸€è¡Œç»Ÿè®¡ä¿¡æ¯ï¼ˆstatsï¼‰ï¼Œè¿™è¡Œæ²¡æœ‰ &lt;code&gt;number&lt;/code&gt; å­—æ®µã€‚è¿™æ®µä»£ç ä¼šè¿‡æ»¤æ‰ç»Ÿè®¡è¡Œï¼Œåªæå–å‡ºå˜æ›´ç¼–å· (Change Number)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰å®‰è£… &lt;code&gt;jq&lt;/code&gt;ï¼Œä½ éœ€è¦å…ˆå®‰è£…å®ƒ (å¦‚ &lt;code&gt;sudo apt-get install jq&lt;/code&gt; æˆ– &lt;code&gt;brew install jq&lt;/code&gt;)ï¼Œæˆ–è€…ä½¿ç”¨å¤æ‚çš„ grep/awk æ›¿æ¢ã€‚&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 class="heading-element" id="-æ ¸å¿ƒé€»è¾‘æµç¨‹å›¾"&gt;&lt;span&gt;ğŸ“š æ ¸å¿ƒé€»è¾‘æµç¨‹å›¾&lt;/span&gt;
 &lt;a href="#-%e6%a0%b8%e5%bf%83%e9%80%bb%e8%be%91%e6%b5%81%e7%a8%8b%e5%9b%be" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Query&lt;/strong&gt;: ç­›é€‰å‡º Owner æ˜¯ä½ ã€Open çŠ¶æ€ã€ä¸”æ²¡æœ‰è´Ÿåˆ†çš„æäº¤ã€‚
&lt;ul&gt;
&lt;li&gt;å‚æ•° &lt;code&gt;--current-patch-set&lt;/code&gt; æ‹¿åˆ°äº†å…³é”®çš„ Commit SHAã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Parse (jq)&lt;/strong&gt;: æå–å‡ºæ¯ä¸€è¡Œçš„ &lt;code&gt;Change-Id&lt;/code&gt; (Ixxxx&amp;hellip;) å’Œ &lt;code&gt;Commit SHA&lt;/code&gt; (9e36&amp;hellip;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Loop&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Step A&lt;/strong&gt;: &lt;code&gt;ssh -n ... review&lt;/code&gt; -&amp;gt; é’ˆå¯¹ SHA æ‰“ +1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step B&lt;/strong&gt;: &lt;code&gt;ssh -n ... set-reviewers&lt;/code&gt; -&amp;gt; é’ˆå¯¹ Change-Id åŠ äººã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ¡å‘½ä»¤ç°åœ¨éå¸¸å¥å£®ï¼Œå³ä½¿ä»¥åä½ è¦æ‰¹é‡æ“ä½œå‡ ç™¾ä¸ªæäº¤ï¼Œå®ƒä¹Ÿèƒ½ç¨³å®šè¿è¡Œï¼&lt;/p&gt;</description></item><item><title>Android è®°å½•ç³»ç»Ÿç©ºé—´çš„é«˜é€šç­”ç–‘</title><link>https://huang8604.github.io/posts/android-%E8%AE%B0%E5%BD%95%E7%B3%BB%E7%BB%9F%E7%A9%BA%E9%97%B4%E7%9A%84%E9%AB%98%E9%80%9A%E7%AD%94%E7%96%91/</link><pubDate>Fri, 21 Nov 2025 08:04:10 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/android-%E8%AE%B0%E5%BD%95%E7%B3%BB%E7%BB%9F%E7%A9%BA%E9%97%B4%E7%9A%84%E9%AB%98%E9%80%9A%E7%AD%94%E7%96%91/</guid><category domain="https://huang8604.github.io/categories/android/">Android</category><description>&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://huang8604.github.io/obsidion/Media/Case_%2005784001%20~%20Customer%20Engineering%20Community.pdf" title="Case\_ 05784001 ~ Customer Engineering Community.pdf" data-thumbnail="/obsidion/Media/Case_%2005784001%20~%20Customer%20Engineering%20Community.pdf" data-sub-html="&lt;h2&gt;Case\_ 05784001 ~ Customer Engineering Community.pdf&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://huang8604.github.io/obsidion/Media/Case_%2005784001%20~%20Customer%20Engineering%20Community.pdf' alt="Case\_ 05784001 ~ Customer Engineering Community.pdf"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2024/05/23/664f083143580.png" title="image.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2024/05/23/664f083143580.png" data-sub-html="&lt;h2&gt;image.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2024/05/23/664f083143580.png' alt="image.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;é«˜é€šå›å¤å®¹é‡ç–‘é—®&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;p&gt;caseä¸­æåˆ°çš„resize/recoveryï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„æ¢å¤å‡ºå‚è®¾ç½®åuserdataæ‹“å±•åˆ°å‰©ä½™ç©ºé—´ï¼Œ16Gå˜32Gçš„åŠ¨ä½œã€‚&lt;br&gt;
æŒ‰é«˜é€šçš„å›å¤æˆªå›¾ï¼Œresize/recoveryä¹‹å‰ uiä¸Šé¢æ˜¾ç¤ºçš„æ€»ç©ºé—´/å·²ç”¨ç©ºé—´å¤§å°æ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰ï¼ˆå‚è€ƒæˆªå›¾ç¬¬å››æ®µè½æœ€åä¸€è¡Œã€‚è¿™é‡Œæåˆ°çš„ä¸å¯ä¿¡å¤§å°å°±æ˜¯ä¹‹å‰ä½ ä»¬çœ‹åˆ°çš„ä¸‹è½½è½¯ä»¶åå¼€æœºï¼Œç³»ç»Ÿå ç”¨16Gï¼Œæ€»å®¹é‡32Gï¼‰&lt;br&gt;
é«˜é€šè®¤ä¸ºresizeä¹‹åï¼Œæ­¤æ—¶UIä¸Šæ˜¾ç¤ºçš„å­˜å‚¨ç©ºé—´æ•°æ®æ˜¯å¯ä¿¡çš„ï¼ˆå‚è€ƒæˆªå›¾å€’æ•°ç¬¬ä¸‰è¡Œï¼Œè¿™é‡Œæåˆ°çš„å¯ä¿¡å¤§å°å°±æ˜¯ä½ ä»¬äº†è§£çš„æ¢å¤å‡ºå‚è®¾ç½®åç³»ç»Ÿå ç”¨32Gï¼Œæ€»å®¹é‡64Gã€‚æˆ‘ä»¬å’Œé«˜é€šåœ¨caseä¸Šæ²Ÿé€šæ—¶æä¾›çš„æœºå™¨æ•°æ®æ˜¯åŸºäº128Gçš„ï¼Œæ‰€ä»¥é«˜é€šåœ¨å¼•ç”¨æ•°æ®æ—¶å†™çš„æ˜¯128Gï¼‰&lt;br&gt;
å¦å¤–ï¼Œç›®å‰PNC560æˆ‘ä»¬å·²ä¿®æ”¹ä¸ºä¸‹è½½è½¯ä»¶åå¼€æœºæ—¶è‡ªåŠ¨æ‹“å±•ï¼Œæ— éœ€å†æ¬¡æ¢å¤å‡ºå‚è®¾ç½®äº†ï¼Œæ‰€ä»¥ç”¨æˆ·æ˜¯çœ‹ä¸åˆ°16Gç³»ç»Ÿå ç”¨è¿™ä¸ªresizeä¹‹å‰çš„æ•°æ®çš„ã€‚&lt;/p&gt;
&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;é«˜é€šçš„è¡¥å……&lt;br&gt;&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;p&gt;New Comment from Qualcomm engineer: &amp;ldquo;Dear Customer,&lt;br&gt;
æˆ‘æƒ³ä½ æˆ‘éƒ½æ¼è€ƒè™‘äº†ä¸€ç‚¹ï¼Œæ‰€æœ‰ufsçš„å®é™…å®¹é‡éƒ½ä¸æ˜¯æ ‡ç§°å®¹é‡ï¼Œå¤§çº¦ç›¸å½“äºæ ‡ç§°å®¹é‡çš„93%å·¦å³ï¼ˆè¿™ä¸€ç‚¹åœ¨vendoræä¾›çš„ specificationæ–‡æ¡£ä¸­åº”è¯¥æœ‰å†™ï¼Œä½ å¯ä»¥è‡ªè¡ŒæŸ¥é˜…æˆ–å‘vendoræ±‚è¯ï¼‰&lt;br&gt;
æ¯”å¦‚ä¸€ä¸ªæ ‡ç§°å®¹é‡64Gçš„Hynix UFSï¼Œ å®ƒçš„å®é™…å®¹é‡å…¶å®æ˜¯59G&lt;br&gt;
LUN0 çš„å®é™…å®¹é‡æ˜¯ 59 - 6 = 53G&lt;br&gt;
userdata ç†è®ºä¸Šå‰©ä¸‹çš„å®¹é‡æ˜¯ 53 - 15 = 38G&lt;br&gt;
å¹¶æ²¡æœ‰ä½ è¯´çš„é‚£ä¹ˆå¤¸å¼ ï¼Œè€Œä¸”æˆ‘ä»¬çš„è®¡ç®—å¹¶æ²¡æœ‰è€ƒè™‘å› ä¸ºç‰©ç†blockå¯¹é½è€Œæ²¡æœ‰è¢«åˆ†é…çš„éƒ¨åˆ†ç©ºé—´ï¼Œä»¥åŠaptåˆ†åŒºè¡¨ï¼ˆmain + backï¼‰æ‰€å ç”¨çš„ç©ºé—´ï¼Œè¿™éƒ¨åˆ†åœ¨partition.xml å’Œ æ“ä½œç³»ç»Ÿä¸­éƒ½æ˜¯ä¸å¯è§çš„ã€‚&lt;/p&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;æµ·èƒ½è¾¾ç–‘é—®&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;h1 class="heading-element" id="æˆ‘ä»¬æŠŠä½ ç»™çš„è¯´æ˜482022-158-amåé¦ˆç»™å®¢æˆ·äº†ä¸‹é¢æ˜¯å®¢æˆ·çš„å›å¤"&gt;&lt;span&gt;New Comment: &amp;ldquo;ä½ å¥½ï¼&lt;br&gt;
æˆ‘ä»¬æŠŠä½ ç»™çš„è¯´æ˜(4/8/2022 1:58 AM)åé¦ˆç»™å®¢æˆ·äº†ï¼Œä¸‹é¢æ˜¯å®¢æˆ·çš„å›å¤ï¼š&lt;/span&gt;
 &lt;a href="#%e6%88%91%e4%bb%ac%e6%8a%8a%e4%bd%a0%e7%bb%99%e7%9a%84%e8%af%b4%e6%98%8e482022-158-am%e5%8f%8d%e9%a6%88%e7%bb%99%e5%ae%a2%e6%88%b7%e4%ba%86%e4%b8%8b%e9%9d%a2%e6%98%af%e5%ae%a2%e6%88%b7%e7%9a%84%e5%9b%9e%e5%a4%8d" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;&lt;h1 class="heading-element" id="è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å¦‚æœæ˜¯æ˜¾ç¤ºé—®é¢˜è¿™éƒ¨åˆ†æœ‰åŠæ³•è°ƒæ•´ä¹ˆè¦ä¸ç„¶æ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰ç–‘é—®çš„"&gt;&lt;span&gt;é«˜é€šçš„å›å¤æœ‰äº›ç»•å£ï¼Œæˆ‘ç¡®è®¤ä¸‹æ˜¯ä¸æ˜¯è¿™æ ·ï¼š&lt;br&gt;
å®‰å“12çš„å›ºä»¶å¤§å°è¶…è¿‡äº†16Gï¼Œå½“å‰è½¯ä»¶çš„å¤§å°ç»Ÿè®¡æ˜¯æŒ‰ç…§2çš„å¹‚æ•°æ¥å–æ•´ï¼Œæ‰€ä»¥æ˜¾ç¤ºä¸º32Gï¼Œè€Œå®é™…ä¸Šè¿™32Gä¸­æœ‰10å¤šGæ˜¯ç©ºçš„ï¼›&lt;br&gt;
æˆ‘çœ‹äº†ä¸‹ä¸ªäººæ‰‹æœºå®‰å“11çš„å›ºä»¶å¤§å°æ˜¯åœ¨11Gå·¦å³ï¼Œå†æ€ä¹ˆå¢åŠ åŠŸèƒ½ï¼Œä¹Ÿä¸å¯èƒ½åˆ°32Gå§ï¼Ÿ&lt;br&gt;
è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ˜¯æ˜¾ç¤ºé—®é¢˜ï¼Œè¿™éƒ¨åˆ†æœ‰åŠæ³•è°ƒæ•´ä¹ˆï¼Ÿè¦ä¸ç„¶æ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰ç–‘é—®çš„ã€‚&lt;/span&gt;
 &lt;a href="#%e8%bf%98%e6%9c%89%e4%b8%80%e4%b8%aa%e9%97%ae%e9%a2%98%e5%a6%82%e6%9e%9c%e6%98%af%e6%98%be%e7%a4%ba%e9%97%ae%e9%a2%98%e8%bf%99%e9%83%a8%e5%88%86%e6%9c%89%e5%8a%9e%e6%b3%95%e8%b0%83%e6%95%b4%e4%b9%88%e8%a6%81%e4%b8%8d%e7%84%b6%e6%af%8f%e4%b8%aa%e7%94%a8%e6%88%b7%e9%83%bd%e4%bc%9a%e6%9c%89%e7%96%91%e9%97%ae%e7%9a%84" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;&lt;p&gt;è¿™ä¸ªäº›é—®é¢˜æ˜¯å¦å¯ä»¥ååŠ©ç¡®è®¤ä¸€ä¸‹ï¼Ÿ&lt;br&gt;
è°¢è°¢ï¼&amp;rdquo;&lt;/p&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;é«˜é€šå›å¤å®¢æˆ·ç­”ç–‘&lt;br&gt;&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;p&gt;&amp;ldquo;Dear Customer,&lt;br&gt;
å®‰å“12çš„å›ºä»¶å¤§å°è¶…è¿‡äº†16Gï¼Œå½“å‰è½¯ä»¶çš„å¤§å°ç»Ÿè®¡æ˜¯æŒ‰ç…§2çš„å¹‚æ•°æ¥å–æ•´ï¼Œæ‰€ä»¥æ˜¾ç¤ºä¸º32Gï¼Œè€Œå®é™…ä¸Šè¿™32Gä¸­æœ‰10å¤šGæ˜¯ç©ºçš„ï¼›&lt;br&gt;
--&amp;gt; è¿™ä¸ªç†è§£æ˜¯æ­£ç¡®çš„&lt;br&gt;
æˆ‘çœ‹äº†ä¸‹ä¸ªäººæ‰‹æœºå®‰å“11çš„å›ºä»¶å¤§å°æ˜¯åœ¨11Gå·¦å³ï¼Œå†æ€ä¹ˆå¢åŠ åŠŸèƒ½ï¼Œä¹Ÿä¸å¯èƒ½åˆ°32Gå§ï¼Ÿ&lt;br&gt;
--&amp;gt;&lt;br&gt;
userdataåˆ†åŒºæ˜¯ç”¨æ¥å­˜æ”¾ç”¨æˆ·æ•°æ®çš„ï¼Œä¸æ˜¯Androidå›ºä»¶ï¼Œä½ å¯ä»¥ç®€å•ç†è§£ï¼šandroidå›ºä»¶å­˜æ”¾åœ¨userdataä¹‹å¤–çš„åˆ†åŒºä¸­&lt;br&gt;
ä»partition.xmlå¯ä»¥çœ‹å‡º LUN0ä¸­é™¤äº†usdataä¹‹å¤–çš„åˆ†åŒºå ç”¨å¤§çº¦14Gï¼Œuserdataåˆ†åŒºåˆå§‹ç©ºé—´15G&lt;br&gt;
æ‰€ä»¥ä¸å­˜åœ¨â€œ32Gâ€çš„androidå›ºä»¶&lt;br&gt;
è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ˜¯æ˜¾ç¤ºé—®é¢˜ï¼Œè¿™éƒ¨åˆ†æœ‰åŠæ³•è°ƒæ•´ä¹ˆï¼Ÿè¦ä¸ç„¶æ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰ç–‘é—®çš„ã€‚&lt;br&gt;
--&amp;gt; å‘å¸ƒåˆ°ç»ˆç«¯ç”¨æˆ·æ‰‹ä¸­çš„è®¾å¤‡åº”è¯¥æ˜¯å·²ç»resizeè¿‡çš„ï¼Œç”¨æˆ·çœ‹åˆ°çš„storageç©ºé—´å¤§å°åº”è¯¥æ˜¯64G/128G,è¿™å·²ç»ä¸å­˜åœ¨æ­§ä¹‰äº†ã€‚&lt;/p&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;Title&lt;br&gt;&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;p&gt;æ–‡éŸ¬ï¼Œå é£ï¼Œ&lt;br&gt;
3 .å·²ç”¨ç©ºé—´æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ˜¯é€šè¿‡2çš„å¹‚æ•°å¯¹é½åå‡å»å¯ç”¨ç©ºé—´ æ˜¾ç¤ºå¯ç”¨ 64-33 = 31G, ä½¿ç”¨æ‰‹æœºå·²ç”¨ç©ºé—´ï¼š 59-6-33 =20Gï¼Œé‡Œé¢åŒ…æ‹¬å·²ç”¨çš„ç©ºé—´å’Œæœªå¯¹é½çš„ç©ºé—´ã€‚&lt;/p&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰€ä»¥é‡Œé¢è™šæ ‡äº† æ€»å®¹é‡ è™šæ ‡äº† 5G è¿˜æœ‰LUN4 6G&lt;br&gt;
æˆ‘çœ‹äº†ä¸‹QFILè¯»å–å‡ºæ¥çš„åˆ†åŒºè¡¨ï¼Œlun4é‡Œå­˜æ”¾çš„ä¸»è¦æ˜¯modemï¼Œdspç­‰åˆ†åŒºï¼Œæ˜¯å±äºä¸‹è½½é•œåƒå†…å®¹ï¼Œæ˜¯æˆ‘ä»¬ä¼ ç»Ÿç†è§£çš„ç³»ç»Ÿå®¹é‡ä¸€éƒ¨åˆ†ã€‚è™šæ ‡åªèƒ½ç®—5Gå§ã€‚&lt;br&gt;
å€’æ˜¯lun0ä¸­çš„backupåˆ†åŒºæ˜¯åº”ç”¨ä¿æŠ¤åˆ†åŒºï¼Œè¿™éƒ¨åˆ†æ˜¯ç®—åˆ°ç³»ç»Ÿé‡Œçš„ï¼Œæœ‰5Gã€‚è¿™ä¸ªæ˜¯æ¯”æ ‡å‡†Android12å ç”¨å¤šå‡ºæ¥çš„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘æŠŠqfil dumpå‡ºæ¥çš„åˆ†åŒºè¡¨è´´åœ¨é™„ä»¶é‡Œäº†ï¼Œæ¯ä¸ªåˆ†åŒºçš„num_partition_sectorså»ä¹˜ä»¥4å°±æ˜¯è¯¥åˆ†åŒºçš„æ€»å­—èŠ‚æ•°ã€‚å é£è¦ä¸æŠŠæ¯ä¸ªåˆ†åŒºå¤§å°ç”¨excelè½¬æ¢ä¸ºå­—èŠ‚æ•°å’Œå¯¹åº”çš„GBæ•°ï¼Œä¼šæ¯”è¾ƒç›´è§‚ï¼Œç„¶åå†åŠ æ€»ä¸€ä¸‹ï¼Œè¯¯å·®å°±æ¯”è¾ƒæ¸…æ¥šäº†ã€‚&lt;br&gt;
å¦å¤–æˆ‘æ¯”è¾ƒäº†64Gå’Œ128Gçš„æœºå™¨ï¼Œç³»ç»Ÿå ç”¨éƒ½æ˜¯32Gï¼Œä¼¼ä¹é«˜é€šè¯´çš„ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå…³é”®è¿˜æ˜¯å®¢æˆ·è¿™è¾¹ã€‚&lt;/p&gt;
&lt;div class="details admonition note open disabled"&gt;
 &lt;div class="details-summary admonition-title"&gt;&lt;i class="icon fa-fw fa-solid fa-pencil-alt" aria-hidden="true"&gt;&lt;/i&gt;Title&lt;br&gt;&lt;/div&gt;
 &lt;div class="details-content"&gt;
 &lt;div class="admonition-content"&gt;&lt;p&gt;å é£ï¼Œ&lt;br&gt;
æˆ‘ç†äº†ä¸€ä¸‹é«˜é€šçš„å›å¤ã€‚ä»¥æˆ‘æ‰‹é‡Œçš„pnc560çš„æ‰‹æœºä¸ºä¾‹ï¼Œæˆ‘æ‰‹é‡Œçš„æ˜¯64Gçš„æ‰‹æœºã€‚&lt;br&gt;
åœ¨è®¾ç½®é‡Œé¢æ˜¾ç¤ºå·²ä½¿ç”¨31Gï¼Œå‰©ä½™33Gçš„ç©ºé—´ã€‚&lt;br&gt;
å®‰è£…é«˜é€šçš„è¯´æ³•å’Œè®¾ç½®ç•Œé¢æ˜¾ç¤ºçš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‰©ä½™å¯ç”¨ç©ºé—´33Gæ˜¯å‡†ç¡®çš„ï¼Œä»£è¡¨å‰©ä½™çš„userdate ç©ºé—´æœ‰33Gã€‚&lt;/li&gt;
&lt;li&gt;æ€»å®¹é‡æ˜¯ä¸å‡†ç¡®çš„ï¼Œç›¸å½“äºæ ‡ç§°çš„93%ï¼Œå¤§çº¦59G ä½†ç³»ç»Ÿä¼šä»¥2çš„å¹‚æ•°æ¥å–æ•´&lt;/li&gt;
&lt;li&gt;å·²ç”¨ç©ºé—´æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ˜¯é€šè¿‡2çš„å¹‚æ•°å¯¹é½åå‡å»å¯ç”¨ç©ºé—´ æ˜¾ç¤ºå¯ç”¨ 64-33 = 31G, ä½¿ç”¨æ‰‹æœºå·²ç”¨ç©ºé—´ï¼š 59-6-33 =20Gï¼Œé‡Œé¢åŒ…æ‹¬å·²ç”¨çš„ç©ºé—´å’Œæœªå¯¹é½çš„ç©ºé—´ã€‚&lt;br&gt;
æ‰€ä»¥é‡Œé¢è™šæ ‡äº† æ€»å®¹é‡ è™šæ ‡äº† 5G è¿˜æœ‰LUN4 6G&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æŒ‰ç…§ç›®å‰çš„è§„åˆ™ï¼Œå¯ç”¨ç©ºé—´è‚¯å®šå¿…é¡»è¦å‡†ç¡®æ— è¯¯çš„ï¼Œé‚£ä¹ˆåœ¨å¯ç”¨ç©ºé—´è®¡ç®—æ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå·²ç”¨ç©ºé—´åªèƒ½æ˜¯31G&lt;/p&gt;</description></item><item><title>AMS -- ActivityRecordã€TaskRecordã€ActivityStackã€ActivityDisplayã€ActivityStackSupervisor</title><link>https://huang8604.github.io/posts/ams--activityrecordtaskrecordactivitystackactivitydisplayactivitystacksupervisor/</link><pubDate>Fri, 21 Nov 2025 08:01:29 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/ams--activityrecordtaskrecordactivitystackactivitydisplayactivitystacksupervisor/</guid><category domain="https://huang8604.github.io/categories/ams/">AMS</category><category domain="https://huang8604.github.io/categories/android/">Android</category><description>&lt;p&gt;ActivityRecordã€TaskRecordã€ActivityStackã€ActivityDisplayã€ActivityStackSupervisor çš„å…³ç³»&lt;/p&gt;
&lt;h1 class="heading-element" id="activitymanagerservice-activityæ ˆç®¡ç†"&gt;&lt;span&gt;ActivityManagerService Activityæ ˆç®¡ç†&lt;/span&gt;
 &lt;a href="#activitymanagerservice-activity%e6%a0%88%e7%ae%a1%e7%90%86" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h1&gt;&lt;h2 class="heading-element" id="activityrecord"&gt;&lt;span&gt;ActivityRecord&lt;/span&gt;
 &lt;a href="#activityrecord" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;è®°å½•Activityçš„ä¿¡æ¯ï¼Œå¹¶é€šè¿‡æˆå‘˜å˜é‡taskæŒ‡å‘TaskRecordã€‚&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç±»å‹&lt;/th&gt;
 &lt;th&gt;åç§°&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;ProcessRecord&lt;/td&gt;
 &lt;td&gt;app&lt;/td&gt;
 &lt;td&gt;è·‘åœ¨å“ªä¸ªè¿›ç¨‹&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;TaskRecord&lt;/td&gt;
 &lt;td&gt;task&lt;/td&gt;
 &lt;td&gt;è·‘åœ¨å“ªä¸ªtask&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityInfo&lt;/td&gt;
 &lt;td&gt;info&lt;/td&gt;
 &lt;td&gt;Activityä¿¡æ¯&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;mActivityType&lt;/td&gt;
 &lt;td&gt;Activityç±»å‹&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityState&lt;/td&gt;
 &lt;td&gt;state&lt;/td&gt;
 &lt;td&gt;ActivityçŠ¶æ€&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ApplicationInfo&lt;/td&gt;
 &lt;td&gt;appInfo&lt;/td&gt;
 &lt;td&gt;è·‘åœ¨å“ªä¸ªapp&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ComponentName&lt;/td&gt;
 &lt;td&gt;realActivity&lt;/td&gt;
 &lt;td&gt;ç»„ä»¶å&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;String&lt;/td&gt;
 &lt;td&gt;packageName&lt;/td&gt;
 &lt;td&gt;åŒ…å&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;String&lt;/td&gt;
 &lt;td&gt;processName&lt;/td&gt;
 &lt;td&gt;è¿›ç¨‹å&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;launchMode&lt;/td&gt;
 &lt;td&gt;å¯åŠ¨æ¨¡å¼&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;userId&lt;/td&gt;
 &lt;td&gt;è¯¥Activityè¿è¡Œåœ¨å“ªä¸ªç”¨æˆ·Id&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class="heading-element" id="taskrecord"&gt;&lt;span&gt;TaskRecord&lt;/span&gt;
 &lt;a href="#taskrecord" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;æè¿°Activityçš„Affinityæ‰€å±çš„æ ˆã€‚&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç±»å‹&lt;/th&gt;
 &lt;th&gt;åç§°&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityStack&lt;/td&gt;
 &lt;td&gt;stack&lt;/td&gt;
 &lt;td&gt;å½“å‰æ‰€å±çš„stack&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ArrayList&lt;ActivityRecord&gt;&lt;/td&gt;
 &lt;td&gt;mActivities&lt;/td&gt;
 &lt;td&gt;å½“å‰taskçš„æ‰€æœ‰Activityåˆ—è¡¨&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;taskId&lt;/td&gt;
 &lt;td&gt;TaskRecordçš„Id&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;String&lt;/td&gt;
 &lt;td&gt;affinity&lt;/td&gt;
 &lt;td&gt;root activityçš„affinityï¼Œå³è¯¥Taskä¸­ç¬¬ä¸€ä¸ªActivity&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;mCallingUid&lt;/td&gt;
 &lt;td&gt;è°ƒç”¨è€…çš„UserId&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;String&lt;/td&gt;
 &lt;td&gt;mCallingPackage&lt;/td&gt;
 &lt;td&gt;è°ƒç”¨è€…çš„åŒ…å&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class="heading-element" id="activitystack"&gt;&lt;span&gt;ActivityStack&lt;/span&gt;
 &lt;a href="#activitystack" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;ç®¡ç†ç€TaskRecordï¼Œå†…éƒ¨ç»´æŠ¤Activityæ‰€æœ‰çŠ¶æ€ã€ç‰¹æ®ŠçŠ¶æ€çš„Activityå’ŒActivityç›¸å…³çš„åˆ—è¡¨æ•°æ®ã€‚&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç±»å‹&lt;/th&gt;
 &lt;th&gt;åç§°&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;ArrayList&lt;TaskRecord&gt;&lt;/td&gt;
 &lt;td&gt;mTaskHistory&lt;/td&gt;
 &lt;td&gt;ä¿å­˜æ‰€æœ‰çš„Taskåˆ—è¡¨&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ArrayList&lt;ActivityStack&gt;&lt;/td&gt;
 &lt;td&gt;mStacks&lt;/td&gt;
 &lt;td&gt;æ‰€æœ‰çš„stackåˆ—è¡¨&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;mStackId&lt;/td&gt;
 &lt;td&gt;ActivityStackvisorçš„mActivityContainersçš„keyå€¼Id&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;int&lt;/td&gt;
 &lt;td&gt;mDisplayId&lt;/td&gt;
 &lt;td&gt;ActivityStackSupervisorçš„mActivityDisplaysçš„keyå€¼Id&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityRecord&lt;/td&gt;
 &lt;td&gt;mPauseingActivity&lt;/td&gt;
 &lt;td&gt;æ­£åœ¨æš‚åœçš„Activity&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityRecord&lt;/td&gt;
 &lt;td&gt;mLastPausedActivity&lt;/td&gt;
 &lt;td&gt;ä¸Šä¸€ä¸ªå·²æš‚åœçš„Activity&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityRecord&lt;/td&gt;
 &lt;td&gt;mResumedActivity&lt;/td&gt;
 &lt;td&gt;å·²ç»Resumedçš„Activity&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityRecord&lt;/td&gt;
 &lt;td&gt;mLastStartedActivity&lt;/td&gt;
 &lt;td&gt;æœ€è¿‘ä¸€æ¬¡å¯åŠ¨çš„Activity&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class="heading-element" id="activitystacksupervisor"&gt;&lt;span&gt;ActivityStackSupervisor&lt;/span&gt;
 &lt;a href="#activitystacksupervisor" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;ç®¡ç†æ‰€æœ‰çš„ActivityStackã€‚&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç±»å‹&lt;/th&gt;
 &lt;th&gt;åç§°&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityStack&lt;/td&gt;
 &lt;td&gt;mHomeStack&lt;/td&gt;
 &lt;td&gt;æ¡Œé¢çš„stack&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityStack&lt;/td&gt;
 &lt;td&gt;mFocusedStack&lt;/td&gt;
 &lt;td&gt;å½“å‰èšç„¦çš„stack&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ActivityStack&lt;/td&gt;
 &lt;td&gt;mLastFocusedStack&lt;/td&gt;
 &lt;td&gt;æ­£åœ¨åˆ‡æ¢åˆ°èšç„¦çš„stack&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;SparseArray&lt;ActivityDisplay&gt;&lt;/td&gt;
 &lt;td&gt;mActivityDisplays&lt;/td&gt;
 &lt;td&gt;displayIdä¸ºkey&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;SparseArray&lt;ActivityContainer&gt;&lt;/td&gt;
 &lt;td&gt;mActivityContainers&lt;/td&gt;
 &lt;td&gt;mStackIdä¸ºkey&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 class="heading-element" id="activitydisplay"&gt;&lt;span&gt;ActivityDisplay&lt;/span&gt;
 &lt;a href="#activitydisplay" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;è¡¨ç¤ºä¸€ä¸ªå±å¹•ï¼ŒAndroidæ”¯æŒä¸‰ç§å±å¹•ï¼šä¸»å±å¹•ï¼Œå¤–æ¥å±å¹•ï¼ˆHDMIç­‰ï¼‰ï¼Œè™šæ‹Ÿå±å¹•ï¼ˆæŠ•å±ï¼‰ä¸€èˆ¬åœ°ï¼Œå¯¹äºæ²¡æœ‰åˆ†å±åŠŸèƒ½ä»¥åŠè™šæ‹Ÿå±çš„æƒ…å†µä¸‹ï¼ŒActivityStackSupervisorä¸ActivityDisplayéƒ½æ˜¯ç³»ç»Ÿå”¯ä¸€ï¼›&lt;em&gt;&lt;strong&gt;ActivityDisplayä¸»è¦æœ‰Home Stackå’ŒApp Stackè¿™ä¸¤ä¸ªæ ˆã€‚&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2 class="heading-element" id="è®°å¿†å…³ç³»é“¾"&gt;&lt;span&gt;è®°å¿†å…³ç³»é“¾&lt;/span&gt;
 &lt;a href="#%e8%ae%b0%e5%bf%86%e5%85%b3%e7%b3%bb%e9%93%be" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;æ¯ä¸ªActivityStackä¸­å¯ä»¥æœ‰è‹¥å¹²ä¸ªTaskRecordå¯¹è±¡ï¼›æ¯ä¸ªTaskRecordä¸­å¯ä»¥æœ‰è‹¥å¹²ä¸ªActivityRecordå¯¹è±¡ï¼›æ¯ä¸ªActivityRecordè®°å½•ä¸€ä¸ªActivityä¿¡æ¯ã€‚ æ­£å‘å…³ç³»é“¾è¡¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;java

 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç ActivityStackSupervisor.mActivityDisplays
-&amp;gt; ActivityDisplay.mStack
-&amp;gt; ActivityStack.mTaskHistory
-&amp;gt; TaskRecord.mActivities
-&amp;gt; ActivityRecord&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åå‘å…³ç³»é“¾&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;java

 ä»£ç è§£è¯»
å¤åˆ¶ä»£ç ActivityRecord.task
-&amp;gt; TaskRecord.mStack
-&amp;gt; ActivityStack.mStackSupervisor
-&amp;gt; ActivityStackSupervisor&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;ActivityStack.mDisplayIdå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ActivityDisplayï¼ŒHOME_STACK_ID=0å¯ä»¥åœ¨ActivityStackSupervisor.mActivityDisplaysæ‰¾åˆ°æ¡Œé¢çš„ActivityStackã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb91a30eb.png" title="image.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb91a30eb.png" data-sub-html="&lt;h2&gt;image.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb91a30eb.png' alt="image.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb4e3cafe.webp" title="TaskRecord.webp" data-thumbnail="https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb4e3cafe.webp" data-sub-html="&lt;h2&gt;TaskRecord.webp&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2024/09/16/66e7bb4e3cafe.webp' alt="TaskRecord.webp"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¼•ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼šå½­å°é“­&lt;br&gt;
é“¾æ¥ï¼šhttps://juejin.cn/post/7267554771540049957&lt;br&gt;
æ¥æºï¼šç¨€åœŸæ˜é‡‘&lt;/p&gt;</description></item><item><title>Android13 SurfaceFlinger onComposerHalRefreshæµç¨‹åˆ†æ_android 13 surfaceflingeå˜åŒ–-CSDNåšå®¢</title><link>https://huang8604.github.io/posts/android13-surfaceflinger-oncomposerhalrefresh%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90-csdn%E5%8D%9A%E5%AE%A2/</link><pubDate>Fri, 21 Nov 2025 08:01:29 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/android13-surfaceflinger-oncomposerhalrefresh%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90-csdn%E5%8D%9A%E5%AE%A2/</guid><description>&lt;p&gt;onComposerHalRefreshæ–¹æ³•æ˜¯SurfaceFlingerä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯åœ¨Composer &lt;a href="https://so.csdn.net/so/search?q=HAL%5c&amp;amp;spm=1001.2101.3001.7020" target="_blank" rel="external nofollow noopener noreferrer"&gt;HAL&lt;/a&gt;åˆ·æ–°æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºæ›´æ–°æ˜¾ç¤ºå†…å®¹ã€‚onComposerHalRefreshæ–¹æ³•ä¼šåœ¨SurfaceFlingeræ¥æ”¶åˆ°Composer HALåˆ·æ–°äº‹ä»¶æ—¶è¢«è°ƒç”¨ã€‚Composer HALæ˜¯ç¡¬ä»¶æŠ½è±¡å±‚çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£ä¸ç¡¬ä»¶æ˜¾ç¤ºè®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚å½“Composer HALå®Œæˆä¸€æ¬¡åˆ·æ–°æ“ä½œåï¼Œä¼šé€šçŸ¥SurfaceFlingerè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨onComposerHalRefreshæ–¹æ³•ä¸­ï¼ŒSurfaceFlingerä¼šæ‰§è¡Œä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…æ‹¬æ›´æ–°å±å¹•ä¸Šçš„å›¾åƒå†…å®¹ã€å¤„ç†æ˜¾ç¤ºå±‚çš„åˆæˆå’Œæ··åˆç­‰ã€‚é€šè¿‡è¿™äº›æ“ä½œï¼ŒSurfaceFlingerèƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºçš„å›¾åƒå†…å®¹æ­£ç¡®åœ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;SurfaceFlingerçš„onComposerHalRefreshæ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Surfaceflinger.cpp
void SurfaceFlinger::onComposerHalRefresh(hal::HWDisplayId) {
 Mutex::Autolock lock(mStateLock);
 scheduleComposite(FrameHint::kNone);
}&lt;/code&gt;&lt;/pre&gt;&lt;h2 class="heading-element" id="surfaceflinger-schedulecomposite"&gt;&lt;span&gt;SurfaceFlinger scheduleComposite&lt;/span&gt;
 &lt;a href="#surfaceflinger-schedulecomposite" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;è°ƒç”¨SurfaceFlingerçš„scheduleCompositeæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Surfaceflinger.cpp
void SurfaceFlinger::scheduleComposite(FrameHint hint) {
 mMustComposite = true;
 scheduleCommit(hint);
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨scheduleCommitæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Surfaceflinger.cpp
std::unique_ptr&amp;lt;scheduler::Scheduler&amp;gt; mScheduler;
void SurfaceFlinger::scheduleCommit(FrameHint hint) {
 if (hint == FrameHint::kActive) {
 mScheduler-&amp;gt;resetIdleTimer();
 }
 mPowerAdvisor-&amp;gt;notifyDisplayUpdateImminent();
 mScheduler-&amp;gt;scheduleFrame();
}&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading-element" id="messagequeue-scheduleframe"&gt;&lt;span&gt;MessageQueue scheduleFrame&lt;/span&gt;
 &lt;a href="#messagequeue-scheduleframe" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;è°ƒç”¨Schedulerçš„scheduleFrameæ–¹æ³•ï¼ŒSchedulerç»§æ‰¿MessageQueueï¼Œè°ƒç”¨MessageQueueçš„scheduleFrameæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Scheduler/MessageQueue.cpp
void MessageQueue::scheduleFrame() {
 ATRACE_CALL();
 
 
 {
 std::lock_guard lock(mInjector.mutex);
 if (CC_UNLIKELY(mInjector.connection)) {
 ALOGD(&amp;#34;%s while injecting VSYNC&amp;#34;, __FUNCTION__);
ã€€//è¯·æ±‚ä¸‹ä¸€ä¸ª VSync ä¿¡å·
 mInjector.connection-&amp;gt;requestNextVsync();
 return;
 }
 }
 
 
 std::lock_guard lock(mVsync.mutex);
 mVsync.scheduledFrameTime =
 mVsync.registration-&amp;gt;schedule({.workDuration = mVsync.workDuration.get().count(),
 .readyDuration = 0,
 .earliestVsync = mVsync.lastCallbackTime.count()});
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨äº†VSyncCallbackRegistrationçš„scheduleæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Scheduler/VSyncCallbackRegistration.cpp
std::reference_wrapper&amp;lt;VSyncDispatch&amp;gt; mDispatch;
ScheduleResult VSyncCallbackRegistration::schedule(VSyncDispatch::ScheduleTiming scheduleTiming) {
 if (!mValidToken) {
 return std::nullopt;
 }
 return mDispatch.get().schedule(mToken, scheduleTiming);
}&lt;/code&gt;&lt;/pre&gt;&lt;h4 class="heading-element" id="vsyncdispatchtimerqueue-schedule"&gt;&lt;span&gt;VSyncDispatchTimerQueue schedule&lt;/span&gt;
 &lt;a href="#vsyncdispatchtimerqueue-schedule" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;p&gt;è°ƒç”¨mDispatch(VSyncDispatch)çš„scheduleæ–¹æ³•ï¼Œå®é™…è°ƒç”¨çš„æ˜¯VSyncDispatchTimerQueueçš„scheduleæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//frameworks/native/services/surfaceflinger/Scheduler/VSyncDispatchTimerQueue.cpp
ScheduleResult VSyncDispatchTimerQueueEntry::schedule(VSyncDispatch::ScheduleTiming timing,
 VSyncTracker&amp;amp; tracker, nsecs_t now) {
 auto nextVsyncTime = tracker.nextAnticipatedVSyncTimeFrom(
 std::max(timing.earliestVsync, now &amp;#43; timing.workDuration &amp;#43; timing.readyDuration));
 auto nextWakeupTime = nextVsyncTime - timing.workDuration - timing.readyDuration;
 
 
 bool const wouldSkipAVsyncTarget =
 mArmedInfo &amp;amp;&amp;amp; (nextVsyncTime &amp;gt; (mArmedInfo-&amp;gt;mActualVsyncTime &amp;#43; mMinVsyncDistance));
 bool const wouldSkipAWakeup =
 mArmedInfo &amp;amp;&amp;amp; ((nextWakeupTime &amp;gt; (mArmedInfo-&amp;gt;mActualWakeupTime &amp;#43; mMinVsyncDistance)));
 if (wouldSkipAVsyncTarget &amp;amp;&amp;amp; wouldSkipAWakeup) {
 return getExpectedCallbackTime(nextVsyncTime, timing);
 }
 
 
 bool const alreadyDispatchedForVsync = mLastDispatchTime &amp;amp;&amp;amp;
 ((*mLastDispatchTime &amp;#43; mMinVsyncDistance) &amp;gt;= nextVsyncTime &amp;amp;&amp;amp;
 (*mLastDispatchTime - mMinVsyncDistance) &amp;lt;= nextVsyncTime);
 if (alreadyDispatchedForVsync) {
 nextVsyncTime =
 tracker.nextAnticipatedVSyncTimeFrom(*mLastDispatchTime &amp;#43; mMinVsyncDistance);
 nextWakeupTime = nextVsyncTime - timing.workDuration - timing.readyDuration;
 }
 // å¦‚æœè®¡æ—¶å™¨çº¿ç¨‹å³å°†è¿è¡Œï¼Œé€šè¿‡å›è°ƒè®¡æ—¶å™¨é‡æ–°è®¡ç®—åº”ç”¨æ­¤å·¥ä½œæ›´æ–°ï¼Œä»¥é¿å…å–æ¶ˆå³å°†è§¦å‘çš„å›è°ƒã€‚
 auto const nextReadyTime = nextVsyncTime - timing.readyDuration;
 mScheduleTiming = timing;
 mArmedInfo = {nextWakeupTime, nextVsyncTime, nextReadyTime};
 return getExpectedCallbackTime(nextVsyncTime, timing);
}&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>FH20GMS-120 [VTS][MR1]vts_generic_boot_image_test - GMS - Confluence</title><link>https://huang8604.github.io/posts/fh20gms-120-vtsmr1vts_generic_boot_image_test-gms-confluence/</link><pubDate>Fri, 21 Nov 2025 08:01:29 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/fh20gms-120-vtsmr1vts_generic_boot_image_test-gms-confluence/</guid><description>&lt;h2 class="heading-element" id="fh20gms-120-vtsmr1vts_generic_boot_image_test"&gt;&lt;span&gt;FH20GMS-120 [VTS][MR1]vts_generic_boot_image_test&lt;/span&gt;
 &lt;a href="#fh20gms-120-vtsmr1vts_generic_boot_image_test" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/10/29/690173b22ea59.png" title="image.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/10/29/690173b22ea59.png" data-sub-html="&lt;h2&gt;image.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/10/29/690173b22ea59.png' alt="image.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»æŠ¥é”™ä¿¡æ¯æ¥çœ‹ramdiskç¼ºå°‘ system/bin/e2fsckï¼Œä½†è®¾å¤‡ä¸Šæ˜¯æœ‰è¿™ä¸ªbinæ–‡ä»¶çš„ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/10/29/690173ff685dc.png" title="image.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/10/29/690173ff685dc.png" data-sub-html="&lt;h2&gt;image.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/10/29/690173ff685dc.png' alt="image.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ramdiskï¼ˆå†…å­˜ç£ç›˜ï¼‰æ˜¯Androidå¯åŠ¨è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨å¯åŠ¨åˆæœŸè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç”¨äºåˆå§‹åŒ–ç³»ç»Ÿå¹¶æŒ‚è½½çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 class="heading-element" id="ramdiskçš„ä½œç”¨"&gt;&lt;span&gt;Ramdiskçš„ä½œç”¨&lt;/span&gt;
 &lt;a href="#ramdisk%e7%9a%84%e4%bd%9c%e7%94%a8" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–ç³»ç»Ÿç¯å¢ƒ&lt;/strong&gt; ï¼š
&lt;ul&gt;
&lt;li&gt;è¿è¡Œinitè¿›ç¨‹ï¼Œå®ƒæ˜¯æ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;è§£æinit.rcè„šæœ¬ï¼Œè®¾ç½®ç³»ç»Ÿå±æ€§ã€åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ã€æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚è½½å¿…è¦çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt; ï¼š
&lt;ul&gt;
&lt;li&gt;æŒ‚è½½systemã€vendorã€dataç­‰åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;è®¾ç½®æ–‡ä»¶ç³»ç»Ÿçš„æƒé™å’ŒSELinuxå®‰å…¨ä¸Šä¸‹æ–‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨å…³é”®ç³»ç»ŸæœåŠ¡&lt;/strong&gt; ï¼š
&lt;ul&gt;
&lt;li&gt;å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆå¦‚ueventdã€logdç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å‡†å¤‡Androidè¿è¡Œæ—¶ç¯å¢ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ¸¡åˆ°çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt; ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨Androidç³»ç»Ÿä¸­ï¼Œramdiské€šå¸¸ç”¨äºå¯åŠ¨åˆ°recoveryæ¨¡å¼æˆ–ä½œä¸ºbooté•œåƒçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ­£å¸¸å¯åŠ¨æ—¶ï¼Œå®ƒä¼šå°†æ§åˆ¶æƒäº¤ç»™systemåˆ†åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 class="heading-element" id="ramdiskåœ¨androidå¯åŠ¨æµç¨‹ä¸­çš„ä½ç½®"&gt;&lt;span&gt;Ramdiskåœ¨Androidå¯åŠ¨æµç¨‹ä¸­çš„ä½ç½®&lt;/span&gt;
 &lt;a href="#ramdisk%e5%9c%a8android%e5%90%af%e5%8a%a8%e6%b5%81%e7%a8%8b%e4%b8%ad%e7%9a%84%e4%bd%8d%e7%bd%ae" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;BootloaderåŠ è½½å†…æ ¸å’Œramdisk&lt;/strong&gt; ï¼šBootloaderå°†å†…æ ¸å’Œramdiské•œåƒåŠ è½½åˆ°å†…å­˜ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸å¯åŠ¨&lt;/strong&gt; ï¼šå†…æ ¸è§£å‹ramdiskå¹¶å°†å…¶ä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;initè¿›ç¨‹å¯åŠ¨&lt;/strong&gt; ï¼šramdiskä¸­çš„initç¨‹åºå¼€å§‹æ‰§è¡Œï¼Œè§£æinit.rcæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œå¯åŠ¨è„šæœ¬&lt;/strong&gt; ï¼šæ ¹æ®init.rcä¸­çš„å‘½ä»¤ï¼ŒæŒ‚è½½ç³»ç»Ÿåˆ†åŒºã€å¯åŠ¨æœåŠ¡ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡æ¢æ ¹æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt; ï¼šåœ¨æŸäº›é…ç½®ä¸­ï¼Œramdiskå¯èƒ½ä¼šè¢«åˆ‡æ¢ä¸ºsystemä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚åœ¨system-as-rooté…ç½®ä¸­ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 class="heading-element" id="ramdiskçš„å†…å®¹"&gt;&lt;span&gt;Ramdiskçš„å†…å®¹&lt;/span&gt;
 &lt;a href="#ramdisk%e7%9a%84%e5%86%85%e5%ae%b9" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ramdiskåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;init&lt;/code&gt; ï¼šåˆå§‹åŒ–ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;init.rc&lt;/code&gt; ï¼šåˆå§‹åŒ–è„šæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;system/&lt;/code&gt; ã€ &lt;code&gt;vendor/&lt;/code&gt; ã€ &lt;code&gt;data/&lt;/code&gt; ç­‰ç›®å½•çš„æŒ‚è½½ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€äº›å¿…è¦çš„å·¥å…·å’Œåº“ï¼ˆå¦‚ &lt;code&gt;e2fsck&lt;/code&gt; ç”¨äºæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨ç­–ç•¥æ–‡ä»¶ï¼ˆå¦‚SELinuxç­–ç•¥ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 class="heading-element" id="è°ƒè¯•ramdiské—®é¢˜"&gt;&lt;span&gt;è°ƒè¯•Ramdiské—®é¢˜&lt;/span&gt;
 &lt;a href="#%e8%b0%83%e8%af%95ramdisk%e9%97%ae%e9%a2%98" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;å½“é‡åˆ°ramdiskç›¸å…³çš„é—®é¢˜æ—¶ï¼ˆå¦‚ç¼ºå°‘æ–‡ä»¶ã€å¤šä½™æ–‡ä»¶ç­‰ï¼‰ï¼Œå¯ä»¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥æ„å»ºé…ç½®&lt;/strong&gt; ï¼šç¡®ä¿æ„å»ºç±»å‹ï¼ˆuser/userdebug/engï¼‰æ­£ç¡®ï¼Œå¹¶ä¸”æ²¡æœ‰æ„å¤–åŒ…å«è°ƒè¯•æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥è®¾å¤‡é…ç½®&lt;/strong&gt; ï¼šåœ¨è®¾å¤‡Makefileä¸­ï¼Œç¡®ä¿åªåŒ…å«äº†å¿…è¦çš„åŒ…å’Œæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥GKIè¦æ±‚&lt;/strong&gt; ï¼šå¦‚æœä½¿ç”¨GKIï¼Œç¡®ä¿ramdiskç¬¦åˆé€šç”¨å†…æ ¸æ˜ åƒçš„è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 class="heading-element" id="æ€»ç»“"&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;
 &lt;a href="#%e6%80%bb%e7%bb%93" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;Ramdiskæ˜¯Androidå¯åŠ¨è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£åˆå§‹åŒ–ç³»ç»Ÿå¹¶æŒ‚è½½çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿã€‚ç¡®ä¿ramdiskåŒ…å«æ­£ç¡®çš„æ–‡ä»¶å’Œä¸åŒ…å«å¤šä½™çš„æ–‡ä»¶å¯¹äºç³»ç»Ÿæ­£å¸¸å¯åŠ¨å’Œé€šè¿‡æµ‹è¯•ï¼ˆå¦‚GKIæµ‹è¯•ï¼‰è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/10/29/6901744a5b4a4.png" title="d74ff1170c203a7a03ad4e03fdf1830a.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/10/29/6901744a5b4a4.png" data-sub-html="&lt;h2&gt;d74ff1170c203a7a03ad4e03fdf1830a.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/10/29/6901744a5b4a4.png' alt="d74ff1170c203a7a03ad4e03fdf1830a.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒé™„ä»¶æ–‡æ¡£ï¼Œå¯ä»¥ç§»é™¤e2fsckï¼Œä¿®æ”¹å¦‚ä¸‹&lt;br&gt;
&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/10/29/6901741f53a4c.png" title="image.png" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/10/29/6901741f53a4c.png" data-sub-html="&lt;h2&gt;image.png&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/10/29/6901741f53a4c.png' alt="image.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜å°±æ˜¯google åˆ©ç”¨æ‰‹é‡Œgmsçš„æ æ†æ¥æ’¬åŠ¨å‚å®¶æŒ‰ç…§æŒ‡æŒ¥æ£’æ¥è¿åŠ¨. é€šè¿‡ä¿®æ”¹VTSçš„æ¡ä»¶,è®©å‚å®¶å¿…é¡»æ ¹æ®VTSçš„è¦æ±‚æ¥åš&lt;/p&gt;</description></item><item><title>avbæ ¡éªŒç›¸å…³ä¸å—æ ¡éªŒåŸç†</title><link>https://huang8604.github.io/posts/avb%E6%A0%A1%E9%AA%8C%E7%9B%B8%E5%85%B3%E4%B8%8E%E5%9D%97%E6%A0%A1%E9%AA%8C%E5%8E%9F%E7%90%86/</link><pubDate>Tue, 04 Nov 2025 03:27:12 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/avb%E6%A0%A1%E9%AA%8C%E7%9B%B8%E5%85%B3%E4%B8%8E%E5%9D%97%E6%A0%A1%E9%AA%8C%E5%8E%9F%E7%90%86/</guid><description>&lt;p&gt;æ–‡ç« è¯¦ç»†é˜è¿°äº†Linuxç³»ç»Ÿåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­é’ˆå¯¹å—è®¾å¤‡çš„æ ¡éªŒæµç¨‹ï¼Œæ¶‰åŠåˆ°VerifiedBoot.cå’ŒLinuxLoader.cç­‰å…³é”®ç»„ä»¶ã€‚é€šç”¨å—è®¾å¤‡å±‚å¤„ç†I/Oè¯·æ±‚ï¼ŒåŒ…æ‹¬æ‰‡åŒºã€å—ã€æ®µå’Œæ•°æ®é¡µçš„æ¦‚å¿µã€‚åŠ¨æ€æ ¡éªŒæµç¨‹ä¸­ï¼Œverity_end_ioå‡½æ•°ç”¨äºå¤„ç†é”™è¯¯å¹¶è§¦å‘å·¥ä½œé˜Ÿåˆ—è¿›è¡Œæ ¡éªŒã€‚dm-verityç”¨äºä¿è¯æ•°æ®å®Œæ•´æ€§ï¼Œé€šè¿‡åˆ›å»ºå“ˆå¸Œæ ‘å¹¶é…ç½®ç›®æ ‡è¡¨æ¥éªŒè¯å—è®¾å¤‡ä¸Šçš„æ•°æ®ã€‚æ­¤å¤–ï¼Œæ–‡ç« è¿˜æåˆ°äº†initç”¨æˆ·æ€æµç¨‹å’Œæ¸…é™¤panicæ ‡è¯†çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 class="heading-element" id="ä¸€å¯åŠ¨æ ¡éªŒæµç¨‹"&gt;&lt;span&gt;ä¸€ã€å¯åŠ¨æ ¡éªŒæµç¨‹&lt;/span&gt;
 &lt;a href="#%e4%b8%80%e5%90%af%e5%8a%a8%e6%a0%a1%e9%aa%8c%e6%b5%81%e7%a8%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;edk2/QcomModulePkg/Library/avb/VerifiedBoot.c
DEBUG ((EFI_D_ERROR, &amp;#34;LoadImageAndAuth failed %r\n&amp;#34;, Status)); in LoadImageAndAuth()

edk2/QcomModulePkg/Application/LinuxLoader/LinuxLoader.c
DEBUG ((EFI_D_ERROR, &amp;#34;LoadImageAndAuth failed: %r\n&amp;#34;, Status));

BootLib/PartitionTableUpdate.c
/QcomModulePkg/Library/avb/libavb/avb_slot_verify.c
LinuxLoaderEntry
 Status = GetRebootReason (&amp;amp;BootReason);
 æ ¡éªŒå¯åŠ¨åŸå› 
 EnumeratePartitions()
 FindPtnActiveSlot
 UpdatePartitionEntries() ----- åŠ è½½avbåˆ†åŒº
 LoadImageAndAuth --------------- VerifiedBoot.c 
 FindBootableSlot -------------- PartitionTableUpdate.c//error
 GetBootPartitionEntry 
 HandleActiveSlotUnbootable //ä¸€ç›´è¿”å›é”™è¯¯
 GetBootPartitionEntry // BootEntry æ£€æµ‹æ²¡è¿‡
 GetActiveSlot //success
 GetBootPartitionEntry ----- for()
 LoadImageAndAuthVB2 --------------- VerifiedBoot.c 
 avb_should_update_rollback
 IsCurrentSlotBootable
 avb_slot_verify ------------------ avb_slot_verify.c
 load_and_verify_vbmeta
 ops-&amp;gt;read_from_partition(ops, 
 AvbReadFromPartition
 &amp;#34;Load Image %a total time: %lu ms \n&amp;#34;
 avb_vbmeta_image_verify
 avb_rsa_verify
 iavb_parse_key_data //Unexpected key length
 avb_manage_hashtree_error_mode
 avb_append_options //avb æ ¹æ®resolved_hashtree_error_mode è®¾ç½®verity_mode
 cmdline_append_option //è®¾ç½®verity_modeåˆ°slot_data-&amp;gt;cmdline
 avb_sub_cmdline
 HandleActiveSlotUnbootable //å½“å‰æ§½ç½®ä¸ºunbootable
 AppendVBCmdLine //cmdlineèµ‹å€¼åˆ°VBCmdLine
 DisplayVerifiedBootScreen
 DisplayVerifiedBootMenu
 BootLinux (&amp;amp;Info);
 UpdateCmdLine
 AddtoBootConfigList //gBS = SystemTable-&amp;gt;BootServices;è¿™é‡Œä¼šåˆ©ç”¨uefi bootæœåŠ¡è®°å½•map
c12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading-element" id="äºŒé€šç”¨å—è®¾å¤‡å±‚å¯¹è¯·æ±‚çš„å¤„ç†"&gt;&lt;span&gt;äºŒã€é€šç”¨å—è®¾å¤‡å±‚å¯¹è¯·æ±‚çš„å¤„ç†&lt;/span&gt;
 &lt;a href="#%e4%ba%8c%e9%80%9a%e7%94%a8%e5%9d%97%e8%ae%be%e5%a4%87%e5%b1%82%e5%af%b9%e8%af%b7%e6%b1%82%e7%9a%84%e5%a4%84%e7%90%86" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;h4 class="heading-element" id="21-å—è®¾å¤‡æ¦‚è¿°"&gt;&lt;span&gt;2.1 å—è®¾å¤‡æ¦‚è¿°&lt;/span&gt;
 &lt;a href="#21-%e5%9d%97%e8%ae%be%e5%a4%87%e6%a6%82%e8%bf%b0" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png" title="5e00f2e29c3ca54ef8bcc80bf046188f\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png" data-sub-html="&lt;h2&gt;5e00f2e29c3ca54ef8bcc80bf046188f\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png' alt="5e00f2e29c3ca54ef8bcc80bf046188f\_MD5"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png" title="acc3989c58db48303c93909ac34381b5\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png" data-sub-html="&lt;h2&gt;acc3989c58db48303c93909ac34381b5\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png' alt="acc3989c58db48303c93909ac34381b5\_MD5"&gt;&lt;/a&gt;&lt;br&gt;
â€¢ å—è®¾å¤‡çš„ &lt;a href="https://so.csdn.net/so/search?q=%E6%8E%A7%E5%88%B6%E5%99%A8%5c&amp;amp;spm=1001.2101.3001.7020" target="_blank" rel="external nofollow noopener noreferrer"&gt;æ§åˆ¶å™¨&lt;/a&gt; ä¼ è¾“çš„å›ºå®šæ•°æ®å•å…ƒå¤§å°ç§°ä¸ºæ‰‡åŒºï¼ˆsectorï¼‰ã€‚å› æ­¤I/Oè°ƒåº¦å™¨&lt;br&gt;
å’Œå— &lt;a href="https://so.csdn.net/so/search?q=%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%5c&amp;amp;spm=1001.2101.3001.7020" target="_blank" rel="external nofollow noopener noreferrer"&gt;è®¾å¤‡é©±åŠ¨&lt;/a&gt; å¿…é¡»ä»¥æ‰‡åŒºä¸ºå•ä½ç®¡ç†æ•°æ®ã€‚&lt;br&gt;
â€¢ &lt;a href="https://so.csdn.net/so/search?q=%E8%99%9A%E6%8B%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%5c&amp;amp;spm=1001.2101.3001.7020" target="_blank" rel="external nofollow noopener noreferrer"&gt;è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ&lt;/a&gt; ã€æ˜ å°„å±‚ï¼ˆmapping layerï¼‰ç®¡ç†ç£ç›˜æ•°æ®çš„é€»è¾‘å•å…ƒå¤§å°ç§°ä¸ºå—&lt;br&gt;
ï¼ˆblockï¼‰ã€‚å¯¹äºæ–‡ä»¶ç³»ç»Ÿæ¥è¯´ï¼Œå—æ˜¯æœ€å°çš„ç£ç›˜æ•°æ®å­˜å‚¨å•å…ƒã€‚&lt;br&gt;
â€¢ å‰é¢åœ¨åˆ†æ•£/èšåˆDMAä¸­ï¼Œæˆ‘ä»¬æåˆ°å—è®¾å¤‡é©±åŠ¨åº”è¯¥èƒ½å¤Ÿå¤„ç†ç§°ä¸ºâ€œæ®µâ€çš„æ•°æ®&lt;br&gt;
å•å…ƒï¼›æ¯ä¸ªâ€œæ®µâ€æ˜¯å†…å­˜ä¸­çš„ä¸€é¡µæˆ–é¡µçš„ä¸€éƒ¨åˆ†ï¼Œâ€œæ®µâ€ä¸­çš„æ•°æ®åœ¨ç£ç›˜ä¸Šæ˜¯&lt;br&gt;
è¿ç»­çš„ã€‚&lt;br&gt;
â€¢ ç£ç›˜ç¼“å†²åŒºå¤„ç†çš„æ•°æ®å•å…ƒå¤§å°ä¸ºâ€œé¡µâ€ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ªé¡µå¸§ã€‚ï¼ˆæ³¨1ï¼‰&lt;br&gt;
â€¢ é€šç”¨å—è®¾å¤‡å±‚ç²˜åˆæ‰€æœ‰ä¸Šå±‚å’Œåº•å±‚çš„éƒ¨åˆ†ï¼Œè¿™æ ·å®ƒå°±çŸ¥é“æ‰‡åŒºã€å—ã€æ®µå’Œæ•°æ®&lt;br&gt;
é¡µã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png" title="954834b855425f1c294027430bc33a92\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png" data-sub-html="&lt;h2&gt;954834b855425f1c294027430bc33a92\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png' alt="954834b855425f1c294027430bc33a92\_MD5"&gt;&lt;/a&gt;&lt;br&gt;
bi_io_vecsæŒ‡å‘ä¸€ä¸ªbio_vec ç»“æ„ä½“ æ•°ç»„ï¼Œè¯¥ç»“æ„ä½“é“¾è¡¨åŒ…å«äº†ä¸€ä¸ªç‰¹å®šI/Oæ“ä½œæ‰€éœ€è¦&lt;br&gt;
ä½¿ç”¨åˆ°çš„æ‰€æœ‰æ®µï¼ˆsegmentï¼‰ã€‚æ¯ä¸ªbio_vecç»“æ„éƒ½æ˜¯ä¸€ä¸ªå½¢å¼ä¸º&amp;lt;page, offset, len&amp;gt;çš„å‘é‡ï¼Œ&lt;br&gt;
å®ƒæè¿°çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„æ®µï¼šæ®µæ‰€åœ¨çš„ç‰©ç†é¡µã€å—åœ¨ç‰©ç†é¡µä¸­çš„åç§»é‡ã€ä»ç»™å®šåç§»é‡å¼€å§‹çš„&lt;br&gt;
å—é•¿åº¦ã€‚æ•´ä¸ªbio_io_vecç»“æ„ä½“æ•°ç»„è¡¨ç¤ºäº†ä¸€ä¸ªå®Œæ•´çš„ç¼“å†²åŒºã€‚bio_vecç»“æ„ä½“å®šä¹‰åœ¨æ–‡ä»¶&lt;br&gt;
include/linux/bio.hä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å†…æ ¸ä½¿ç”¨gendiskç»“æ„ï¼Œå®šä¹‰åœ¨include/linux/genhd.hä¸­ï¼Œæ¥è¡¨ç¤ºä¸€ä¸ªç‹¬ç«‹çš„ç£ç›˜è®¾å¤‡ã€‚&lt;br&gt;
å®é™…ä¸Šå†…æ ¸è¿˜ä½¿ç”¨gendiskè¡¨ç¤ºåˆ†åŒºï¼Œä½†æ˜¯é©±åŠ¨ç¨‹åºä¸éœ€è¦äº†è§£è¿™äº›ã€‚åœ¨gendiskç»“æ„ä¸­çš„è®¸&lt;br&gt;
å¤šæˆå‘˜å¿…é¡»ç”±é©±åŠ¨ç¨‹åºè¿›è¡Œåˆå§‹åŒ–ã€‚&lt;br&gt;
ç‰©ç†ç£ç›˜é€šå¸¸è¢«åˆ†æˆå¤šä¸ªé€»è¾‘åˆ†åŒºã€‚æ¯ä¸ªå—è®¾å¤‡æ–‡ä»¶å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ•´ä¸ªç‰©ç†ç£ç›˜æˆ–è€…å…¶&lt;br&gt;
ä¸­çš„ä¸€ä¸ªåˆ†åŒºã€‚å¦‚/dev/sdaã€/dev/sda1ã€/dev/sda2ç­‰ã€‚è‹¥ä¸€ä¸ªç‰©ç†ç£ç›˜æœ‰å¤šä¸ªåˆ†åŒºï¼Œåˆ™ç£&lt;br&gt;
ç›˜çš„å¸ƒå±€ä¿å­˜åœ¨hd_structæ•°æ®ç»“æ„æ•°ç»„ä¸­ï¼Œæ•°ç»„çš„åœ°å€ç”±gendiskç»“æ„ä½“ä¸­çš„partæˆå‘˜ä¿å­˜ã€‚&lt;br&gt;
hd_structæ•°æ®ç»“æ„çš„å®šä¹‰åœ¨æ–‡ä»¶include/linux/genhd.hä¸­ã€‚&lt;br&gt;
&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png" title="1fc10005749f6d7feb2679226952a87e\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png" data-sub-html="&lt;h2&gt;1fc10005749f6d7feb2679226952a87e\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png' alt="1fc10005749f6d7feb2679226952a87e\_MD5"&gt;&lt;/a&gt;&lt;br&gt;
å½“å†…æ ¸åœ¨ç³»ç»Ÿä¸­å‘ç°ä¸€ä¸ªæ–°ç£ç›˜æ—¶ï¼Œè°ƒç”¨alloc_diskï¼ˆï¼‰åˆ†é…ç›¸å…³æ•°æ®ç»“æ„ï¼Œå¦‚gendiskï¼Œ&lt;br&gt;
hd_structç­‰ï¼Œç„¶åè°ƒç”¨add_diskï¼ˆï¼‰å°†ç£ç›˜æ·»åŠ åˆ°ç³»ç»Ÿä¸­ã€‚æ³¨æ„ï¼šä¸€æ—¦è°ƒç”¨äº†add_diskï¼Œ&lt;br&gt;
ç£ç›˜è®¾å¤‡å°±è¢«â€œæ¿€æ´»â€œï¼Œè¡¨ç¤ºå¯ä»¥ä½¿ç”¨ï¼Œå¹¶éšæ—¶ä¼šè°ƒç”¨å®ƒä»¬æä¾›çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4 class="heading-element" id="22å‘é€šç”¨å—è®¾å¤‡å±‚å‘é€è¯·æ±‚"&gt;&lt;span&gt;2.2å‘é€šç”¨å—è®¾å¤‡å±‚å‘é€è¯·æ±‚&lt;/span&gt;
 &lt;a href="#22%e5%90%91%e9%80%9a%e7%94%a8%e5%9d%97%e8%ae%be%e5%a4%87%e5%b1%82%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;ä¸Šå±‚ä¸‹å‘ç£ç›˜æ•°æ®è¯·æ±‚&lt;/li&gt;
&lt;li&gt;é€šç”¨å—å±‚ç”³è¯·bioç»“æ„ï¼Œå°†è¯·æ±‚çš„æ•°æ®åˆ†æ®µè®°å½•åˆ°bioä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯·æ±‚çš„æ•°æ®å¤§äºä¸€ä¸ªbioå…è®¸çš„æœ€å¤§æ•°æ®é‡ï¼Œåˆ™å°†è¯·æ±‚åˆ†æˆå¤šä¸ªbio&lt;/li&gt;
&lt;li&gt;è°ƒç”¨submit_bioæäº¤bioè¯·æ±‚&lt;/li&gt;
&lt;li&gt;submit_bioå‡½æ•°ç»è¿‡å±‚å±‚è°ƒç”¨ï¼Œæœ€ç»ˆè°ƒç”¨å—è®¾å¤‡è¯·æ±‚é˜Ÿåˆ—ä¸­çš„make_request_fnæˆå‘˜å‡½æ•°å°†bioæäº¤ç»™I/Oè°ƒåº¦å±‚è¿›è¡Œå¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;generic_make_requestå‡½æ•°å°†bioè¿æ¥åˆ°current-&amp;gt;bio_listé“¾è¡¨ä¸­ï¼Œå¹¶è°ƒç”¨__generic_make_requestå‡½æ•°æäº¤é“¾è¡¨ä¸­æ‰€æœ‰çš„bioã€‚&lt;br&gt;
&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png" title="42e5e295f7c8fdf163477337556cd667\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png" data-sub-html="&lt;h2&gt;42e5e295f7c8fdf163477337556cd667\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png' alt="42e5e295f7c8fdf163477337556cd667\_MD5"&gt;&lt;/a&gt;&lt;br&gt;
__generic_make_requestå‡½æ•°æœ€ç»ˆä¼šè°ƒç”¨å—è®¾å¤‡çš„è¯·æ±‚é˜Ÿåˆ—ä¸­çš„make_request_fnæˆå‘˜å‡½æ•°å°†bioè¯·æ±‚å‘é€ç»™I/Oè°ƒåº¦å±‚ï¼Œè‡³æ­¤å¯¹ç£ç›˜çš„æ•°æ®è¯·æ±‚ç¦»å¼€é€šç”¨å—å±‚ï¼Œè¿›å…¥ä¸‹ä¸€å±‚â€”â€”I/Oè°ƒåº¦å±‚&lt;br&gt;
&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png" title="8eb9347c4d3a718659464cbfdb6eb4ff\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png" data-sub-html="&lt;h2&gt;8eb9347c4d3a718659464cbfdb6eb4ff\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png' alt="8eb9347c4d3a718659464cbfdb6eb4ff\_MD5"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4 class="heading-element" id="23-åŠ¨æ€æ ¡éªŒæµç¨‹"&gt;&lt;span&gt;2.3 åŠ¨æ€æ ¡éªŒæµç¨‹&lt;/span&gt;
 &lt;a href="#23-%e5%8a%a8%e6%80%81%e6%a0%a1%e9%aa%8c%e6%b5%81%e7%a8%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;verity_map
 bio-&amp;gt;bi_end_io = verity_end_io;

verity_end_io
 INIT_WORK(&amp;amp;io-&amp;gt;work, verity_work);
 queue_work(io-&amp;gt;v-&amp;gt;verify_wq, &amp;amp;io-&amp;gt;work);

verity_work
 verity_finish_io
 verity_verify_io
 struct bio *bio = dm_bio_from_per_bio_data
 for (b = 0; b &amp;lt; io-&amp;gt;n_blocks; b&amp;#43;&amp;#43;)
 verity_fec_decode
 DMWARN_LIMIT(&amp;#34;%s: FEC: recursion too deep&amp;#34;, v-&amp;gt;data_dev-&amp;gt;name);
 verity_handle_err
 DMERR_LIMIT(&amp;#34;%s: %s block %llu is corrupted&amp;#34;, v-&amp;gt;data_dev-&amp;gt;name,
 type_str, block);

__submit_bio
 blk_mq_submit_bio
 bio_endio ///kernel_platform/msm-kernel/block/bio.c
 bio-&amp;gt;bi_end_io
c12345678910111213141516171819202122&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;struct dm_verity_io {
72 struct dm_verity *v;
73 
74 /* original value of bio-&amp;gt;bi_end_io */
75 bio_end_io_t *orig_bi_end_io;
76 
77 sector_t block;
78 unsigned n_blocks;
79 
80 struct bvec_iter iter;
81 
82 struct work_struct work;
83 
84 /*
85 * Three variably-size fields follow this struct:
86 *
87 * u8 hash_req[v-&amp;gt;ahash_reqsize];
88 * u8 real_digest[v-&amp;gt;digest_size];
89 * u8 want_digest[v-&amp;gt;digest_size];
90 *
91 * To access them use: verity_io_hash_req(), verity_io_real_digest()
92 * and verity_io_want_digest().
93 */
94 };
c123456789101112131415161718192021222324&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;int verity_hash_for_block(struct dm_verity *v, struct dm_verity_io *io,
335 sector_t block, u8 *digest, bool *is_zero)
336 {
337 int r = 0, i;
339 if (likely(v-&amp;gt;levels)) {
340 /*
341 * First, we try to get the requested hash for
342 * the current block. If the hash block itself is
343 * verified, zero is returned. If it isn&amp;#39;t, this
344 * function returns 1 and we fall back to whole
345 * chain verification.
346 */
347 r = verity_verify_level(v, io, block, 0, true, digest);
348 if (likely(r &amp;lt;= 0))
349 goto out;
350 }
352 memcpy(digest, v-&amp;gt;root_digest, v-&amp;gt;digest_size);
354 for (i = v-&amp;gt;levels - 1; i &amp;gt;= 0; i--) {
355 r = verity_verify_level(v, io, block, i, false, digest);
356 if (unlikely(r))
357 goto out;
358 }
359 out:
360 if (!r &amp;amp;&amp;amp; v-&amp;gt;zero_digest)
361 *is_zero = !memcmp(v-&amp;gt;zero_digest, digest, v-&amp;gt;digest_size);
362 else
363 *is_zero = false;
364 
365 return r;
366 }
c123456789101112131415161718192021222324252627282930&lt;/code&gt;&lt;/pre&gt;&lt;h4 class="heading-element" id="24-æ ¸å¿ƒæ ¡éªŒæ•°æ®"&gt;&lt;span&gt;2.4 æ ¸å¿ƒæ ¡éªŒæ•°æ®&lt;/span&gt;
 &lt;a href="#24-%e6%a0%b8%e5%bf%83%e6%a0%a1%e9%aa%8c%e6%95%b0%e6%8d%ae" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h4&gt;&lt;pre&gt;&lt;code&gt;struct dm_verity {
35 struct dm_dev *data_dev;
36 struct dm_dev *hash_dev;
37 struct dm_target *ti;
38 struct dm_bufio_client *bufio;
39 char *alg_name;
40 struct crypto_ahash *tfm;
41 u8 *root_digest; /* digest of the root block */
42 u8 *salt; /* salt: its size is salt_size */
43 u8 *zero_digest; /* digest for a zero block */
44 unsigned salt_size;
45 sector_t data_start; /* data offset in 512-byte sectors */
46 sector_t hash_start; /* hash start in blocks */
47 sector_t data_blocks; /* the number of data blocks */
48 sector_t hash_blocks; /* the number of hash blocks */
49 unsigned char data_dev_block_bits; /* log2(data blocksize) */
50 unsigned char hash_dev_block_bits; /* log2(hash blocksize) */
51 unsigned char hash_per_block_bits; /* log2(hashes in hash block) */
52 unsigned char levels; /* the number of tree levels */
53 unsigned char version;
54 unsigned digest_size; /* digest size for the current hash algorithm */
55 unsigned int ahash_reqsize;/* the size of temporary space for crypto */
56 int hash_failed; /* set to 1 if hash of any block failed */
57 enum verity_mode mode; /* mode for handling verification errors */
58 unsigned corrupted_errs;/* Number of errors for corrupted blocks */
59
60 struct workqueue_struct *verify_wq;
61
62 /* starting blocks for each tree level. 0 is the lowest level. */
63 sector_t hash_level_block[DM_VERITY_MAX_LEVELS];
64
65 struct dm_verity_fec *fec; /* forward error correction */
66 unsigned long *validated_blocks; /* bitset blocks validated */
67
68 char *signature_key_desc; /* signature keyring reference */
69 };
70
c12345678910111213141516171819202122232425262728293031323334353637&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;[??? 3.809367] v-&amp;gt;hash_blocks = 662070?? ï¼ˆ662070-656896=5174ï¼‰
[??? 3.812900] v-&amp;gt;data_dev_block_bits=12
[??? 3.816608] v-&amp;gt;hash_dev_block_bits=12
[??? 3.820279] v-&amp;gt;hash_per_block_bits=7?? (4096/32 = 128, æŒ‡ä¸€ä¸ª4Kå—ä¸Šæœ‰128ä¸ªå“ˆå¸Œå€¼)
[??? 3.823888] v-&amp;gt;levels=3
[??? 3.826380] v-&amp;gt;version =1
[??? 3.829033] v-&amp;gt;digest_size=32
c1234567&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;æ•°æ®å—æœ‰656896X4X1024? (è¶…è¿‡äº†2G)
Level 0 :? 656896/128 = 5132ä¸ª4kå—
Level 1 :? 5132/128= 41ä¸ª4kå—
Level 2:? 40 /128 = 0ï¼Œå³1ä¸ª4kå—
å…± 5132&amp;#43;41&amp;#43;1 = 5174 ä¸ªå—
c12345&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;static void verity_hash_at_level(struct dm_verity *v, sector_t block, int level,
193 sector_t *hash_block, unsigned *offset)
194 {
195 sector_t position = verity_position_at_level(v, block, level);
196 unsigned idx;
198 *hash_block = v-&amp;gt;hash_level_block[level] &amp;#43; (position &amp;gt;&amp;gt; v-&amp;gt;hash_per_block_bits);
200 if (!offset)
201 return;
203 idx = position &amp;amp; ((1 &amp;lt;&amp;lt; v-&amp;gt;hash_per_block_bits) - 1);
204 if (!v-&amp;gt;version)
205 *offset = idx * v-&amp;gt;digest_size;
206 else
207 *offset = idx &amp;lt;&amp;lt; (v-&amp;gt;hash_dev_block_bits - v-&amp;gt;hash_per_block_bits);
208 }

static sector_t verity_position_at_level(struct dm_verity *v, sector_t block,
92 int level)
93 {
94 return block &amp;gt;&amp;gt; (level * v-&amp;gt;hash_per_block_bits);
95 }
c1234567891011121314151617181920&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading-element" id="ä¸‰initç”¨æˆ·æ€æµç¨‹"&gt;&lt;span&gt;ä¸‰ã€initç”¨æˆ·æ€æµç¨‹&lt;/span&gt;
 &lt;a href="#%e4%b8%89init%e7%94%a8%e6%88%b7%e6%80%81%e6%b5%81%e7%a8%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;FirstStageMain
 FirstStageMount::DoFirstStageMount
 FirstStageMount::MountPartitions
 FirstStageMount::MountPartition
 FirstStageMountVBootV2::SetUpDmVerity
 AvbHandle::LoadAndVerifyVbmeta
 Failed to load offline vbmeta for
c1234567&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading-element" id="å››-æ¸…é™¤panicæ ‡è¯†"&gt;&lt;span&gt;å›› æ¸…é™¤panicæ ‡è¯†&lt;/span&gt;
 &lt;a href="#%e5%9b%9b-%e6%b8%85%e9%99%a4panic%e6%a0%87%e8%af%86" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;adb shell
reboot &amp;#34;dm-verity enforcing&amp;#34;
reboot &amp;#34;dm-verity device corrupted&amp;#34;
c123&lt;/code&gt;&lt;/pre&gt;&lt;h3 class="heading-element" id="äº”-dm-verityå»ºç«‹è¿‡ç¨‹"&gt;&lt;span&gt;äº” dm-verityå»ºç«‹è¿‡ç¨‹&lt;/span&gt;
 &lt;a href="#%e4%ba%94-dm-verity%e5%bb%ba%e7%ab%8b%e8%bf%87%e7%a8%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;åœ¨Device Mapper ï¼ˆDMï¼‰ä¸­ä½¿ç”¨dm-verityæ—¶ï¼Œéœ€è¦é…ç½®ä¸€ä¸ªå“ˆå¸Œæ ‘ï¼ˆhash treeï¼‰ï¼Œä»¥ä¾¿éªŒè¯å—è®¾å¤‡ä¸Šçš„æ•°æ®çš„å®Œæ•´æ€§ã€‚è¿™é€šå¸¸é€šè¿‡åœ¨dmsetupå‘½ä»¤ä¸­çš„ç›®æ ‡è¡¨ï¼ˆtarget tableï¼‰å‚æ•°ä¸­æŒ‡å®šç›¸å…³å‚æ•°æ¥å®Œæˆã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä¸ºdm-mapperä¸­çš„dm-verityæ„å»ºä¸€ä¸ªå“ˆå¸Œæ ‘é…ç½®è¡¨çš„ä¸€èˆ¬æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºæºå—è®¾å¤‡&lt;/strong&gt; ï¼šé¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å—è®¾å¤‡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å—è®¾å¤‡ï¼Œä¾‹å¦‚ç¡¬ç›˜åˆ†åŒºæˆ–è€…ä¸€ä¸ªé•œåƒæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©å“ˆå¸Œç®—æ³•&lt;/strong&gt; ï¼šç¡®å®šè¦ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•ã€‚dm-verityæ”¯æŒå¤šç§å“ˆå¸Œç®—æ³•ï¼ŒåŒ…æ‹¬SHA-256ã€SHA-1ã€SHA-512ç­‰ã€‚ä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªé€‚åˆä½ çš„éœ€æ±‚çš„å“ˆå¸Œç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆå“ˆå¸Œè¡¨&lt;/strong&gt; ï¼šä½¿ç”¨ç”Ÿæˆ å“ˆå¸Œè¡¨ çš„å·¥å…·ï¼Œä¾‹å¦‚veritysetupå·¥å…·ï¼Œæ¥ä¸ºæºå—è®¾å¤‡ç”Ÿæˆå“ˆå¸Œè¡¨ã€‚è¿™ä¸ªå“ˆå¸Œè¡¨åŒ…å«äº†å—è®¾å¤‡ä¸­æ¯ä¸ªå—çš„å“ˆå¸Œå€¼ã€‚é€šå¸¸ï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆå“ˆå¸Œè¡¨ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;veritysetup format /dev/source_device /dev/mapper/verity_device
c1&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼Œ/dev/source_device æ˜¯æºå—è®¾å¤‡ï¼Œ/dev/mapper/verity_device æ˜¯dm-verityè®¾å¤‡ã€‚è¿™ä¸ªå‘½ä»¤å°†ç”Ÿæˆå“ˆå¸Œè¡¨å¹¶å°†å…¶å­˜å‚¨åœ¨dm-verityè®¾å¤‡ä¸Šã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®dm-verityç›®æ ‡&lt;/strong&gt; ï¼šä½¿ç”¨dmsetupå‘½ä»¤é…ç½®dm-verityç›®æ ‡ã€‚ä½ éœ€è¦æä¾›å“ˆå¸Œæ ‘çš„æ ¹å“ˆå¸Œå€¼ã€å—å¤§å°ã€æºå—è®¾å¤‡å’Œdm-verityè®¾å¤‡çš„åç§°ã€‚é€šå¸¸ï¼Œé…ç½®è¡¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;dmsetup create verity_device --table &amp;#39;0 &amp;lt;block_size&amp;gt; verity &amp;lt;root_hash&amp;gt; /dev/source_device /dev/mapper/verity_device&amp;#39;
c1&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼Œ&amp;lt;block_size&amp;gt; æ˜¯å—çš„å¤§å°ï¼Œ&amp;lt;root_hash&amp;gt; æ˜¯å“ˆå¸Œæ ‘çš„æ ¹å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨dm-verityè®¾å¤‡&lt;/strong&gt; ï¼šä¸€æ—¦dm-verityè®¾å¤‡è¢«åˆ›å»ºï¼Œä½ å¯ä»¥åƒä½¿ç”¨ä»»ä½•å…¶ä»–å—è®¾å¤‡ä¸€æ ·ä½¿ç”¨å®ƒã€‚æ•°æ®å°†åœ¨è¯»å–æ—¶è¢«éªŒè¯ï¼Œä»¥ç¡®ä¿å…¶å®Œæ•´æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œçš„å…³é”®æ˜¯ç”Ÿæˆå“ˆå¸Œè¡¨å¹¶é…ç½®dm-verityç›®æ ‡ï¼Œä»¥ä¾¿éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ã€‚å“ˆå¸Œè¡¨æ˜¯dm-verityéªŒè¯æ•°æ®å®Œæ•´æ€§æ‰€å¿…éœ€çš„ï¼Œå› ä¸ºå®ƒåŒ…å«äº†æºæ•°æ®å—çš„å“ˆå¸Œå€¼ï¼Œç”¨äºéªŒè¯æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ã€‚é…ç½®è¡¨æŒ‡å®šäº†å¦‚ä½•ä½¿ç”¨å“ˆå¸Œè¡¨ä»¥åŠå…¶ä»–ç›¸å…³å‚æ•°ã€‚é…ç½®è¡¨çš„æ ¼å¼å–å†³äºdm-verityç›®æ ‡çš„å®ç°å’Œä½ çš„éœ€æ±‚ï¼Œä½†é€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«æ‰€éœ€å‚æ•°çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;ubuntu ä¸Šdm-mapperç›¸å…³ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;astro@astrox:~/code/test$ sudo lvdisplay --maps /dev/mapper/ubuntu--vg-ubuntu--lv
 --- Logical volume ---
 LV Path /dev/ubuntu-vg/ubuntu-lv
 LV Name ubuntu-lv
 VG Name ubuntu-vg
 LV UUID fSgsCj-fCWR-JeiN-WWQL-xPdv-T1gZ-QO9f9M
 LV Write Access read/write
 LV Creation host, time ubuntu-server, 2023-05-09 09:07:38 &amp;#43;0000
 LV Status available
 # open 1
 LV Size 49.25 GiB
 Current LE 12608
 Segments 1
 Allocation inherit
 Read ahead sectors auto
 - currently set to 256
 Block device 253:0

 --- Segments ---
 Logical extents 0 to 12607:
 Type linear
 Physical volume /dev/sda3
 Physical extents 0 to 12607

c123456789101112131415161718192021222324&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‚è€ƒï¼š&lt;br&gt;
&lt;a href="https://aliez22.github.io/posts/11537/" target="_blank" rel="external nofollow noopener noreferrer"&gt;https://aliez22.github.io/posts/11537/&lt;/a&gt;&lt;br&gt;
&lt;a href="https://www.shili8.cn/article/detail" target="_blank" rel="external nofollow noopener noreferrer"&gt;https://www.shili8.cn/article/detail&lt;/a&gt;_20000194464.html&lt;/p&gt;
&lt;p&gt;&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png" title="5e00f2e29c3ca54ef8bcc80bf046188f\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png" data-sub-html="&lt;h2&gt;5e00f2e29c3ca54ef8bcc80bf046188f\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a7e546.png' alt="5e00f2e29c3ca54ef8bcc80bf046188f\_MD5"&gt;&lt;/a&gt; &lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png" title="acc3989c58db48303c93909ac34381b5\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png" data-sub-html="&lt;h2&gt;acc3989c58db48303c93909ac34381b5\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5a748.png' alt="acc3989c58db48303c93909ac34381b5\_MD5"&gt;&lt;/a&gt; &lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png" title="954834b855425f1c294027430bc33a92\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png" data-sub-html="&lt;h2&gt;954834b855425f1c294027430bc33a92\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9b14c.png' alt="954834b855425f1c294027430bc33a92\_MD5"&gt;&lt;/a&gt; &lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png" title="1fc10005749f6d7feb2679226952a87e\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png" data-sub-html="&lt;h2&gt;1fc10005749f6d7feb2679226952a87e\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a5898c.png' alt="1fc10005749f6d7feb2679226952a87e\_MD5"&gt;&lt;/a&gt; &lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png" title="42e5e295f7c8fdf163477337556cd667\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png" data-sub-html="&lt;h2&gt;42e5e295f7c8fdf163477337556cd667\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a53dd6.png' alt="42e5e295f7c8fdf163477337556cd667\_MD5"&gt;&lt;/a&gt; &lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png" title="8eb9347c4d3a718659464cbfdb6eb4ff\_MD5" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png" data-sub-html="&lt;h2&gt;8eb9347c4d3a718659464cbfdb6eb4ff\_MD5&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/04/6909737a9cc7b.png' alt="8eb9347c4d3a718659464cbfdb6eb4ff\_MD5"&gt;&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Linux ä¸‹ä½¿ç”¨ tar ä¸ pigz è¿›è¡Œå¤šæ ¸å‹ç¼©</title><link>https://huang8604.github.io/posts/linux-%E4%B8%8B%E4%BD%BF%E7%94%A8-tar-%E4%B8%8E-pigz-%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%A0%B8%E5%8E%8B%E7%BC%A9/</link><pubDate>Tue, 28 Oct 2025 00:00:00 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/linux-%E4%B8%8B%E4%BD%BF%E7%94%A8-tar-%E4%B8%8E-pigz-%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%A0%B8%E5%8E%8B%E7%BC%A9/</guid><description>&lt;h2 class="heading-element" id="å®ç”¨å‘½ä»¤æ±‡æ€»"&gt;&lt;span&gt;å®ç”¨å‘½ä»¤æ±‡æ€»&lt;/span&gt;
 &lt;a href="#%e5%ae%9e%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ä»»åŠ¡&lt;/th&gt;
 &lt;th&gt;å‘½ä»¤&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;å¤šæ ¸å‹ç¼©ç›®å½•&lt;/td&gt;
 &lt;td&gt;`tar -cvf - /data&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å¤šæ ¸è§£å‹æ–‡ä»¶&lt;/td&gt;
 &lt;td&gt;`pigz -dc -p 4 /backup/data.tar.gz&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ç®€å†™å‹ç¼©å‘½ä»¤&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;tar --use-compress-program=&amp;quot;pigz -p 4&amp;quot; -cvf data.tar.gz /data&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ç®€å†™è§£å‹å‘½ä»¤&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;tar --use-compress-program=&amp;quot;pigz -dp 4&amp;quot; -xvf data.tar.gz&lt;/code&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å‹ç¼©å‘½ä»¤&lt;/td&gt;
 &lt;td&gt;tar -cvf - /data | pigz -p $(nproc)-2 &amp;gt; /backup/backup.tar.gz&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;è§£å‹&lt;/td&gt;
 &lt;td&gt;pigz -dc -p $(nproc)-2 /backup/backup.tar.gz | tar -xvf -&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;-p $(nproc)-1&lt;/p&gt;
&lt;h2 class="heading-element" id="-linux-ä¸‹ä½¿ç”¨-tar-ä¸-pigz-è¿›è¡Œå¤šæ ¸å‹ç¼©"&gt;&lt;span&gt;ğŸ“˜ Linux ä¸‹ä½¿ç”¨ tar ä¸ pigz è¿›è¡Œå¤šæ ¸å‹ç¼©&lt;/span&gt;
 &lt;a href="#-linux-%e4%b8%8b%e4%bd%bf%e7%94%a8-tar-%e4%b8%8e-pigz-%e8%bf%9b%e8%a1%8c%e5%a4%9a%e6%a0%b8%e5%8e%8b%e7%bc%a9" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;h2 class="heading-element" id="ä¸€æ¦‚è¿°"&gt;&lt;span&gt;ä¸€ã€æ¦‚è¿°&lt;/span&gt;
 &lt;a href="#%e4%b8%80%e6%a6%82%e8%bf%b0" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ &lt;code&gt;tar&lt;/code&gt; æ˜¯æœ€å¸¸ç”¨çš„å½’æ¡£ï¼ˆæ‰“åŒ…ï¼‰å·¥å…·ä¹‹ä¸€ï¼Œç”¨äºå°†å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ã€‚&lt;br&gt;
è€Œ &lt;code&gt;gzip&lt;/code&gt; æ˜¯å¸¸ç”¨çš„å‹ç¼©å·¥å…·ï¼Œç”¨äºå¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œå‹ç¼©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tar&lt;/code&gt; ä¸ &lt;code&gt;gzip&lt;/code&gt; å¸¸æ­é…ä½¿ç”¨å½¢æˆå‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -czf backup.tar.gz /data&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†è¿™ç§æ–¹å¼çš„ä¸€ä¸ªæ˜æ˜¾é™åˆ¶æ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;code&gt;tar&lt;/code&gt; ä¸ &lt;code&gt;gzip&lt;/code&gt; å‡ä¸ºå•çº¿ç¨‹ç¨‹åºï¼Œåªèƒ½ä½¿ç”¨ä¸€ä¸ª CPU æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“ç³»ç»Ÿ CPU è¾ƒå¤šã€æ–‡ä»¶è¾ƒå¤§æ—¶ï¼ˆå¦‚ 10GB ä»¥ä¸Šï¼‰ï¼Œè¿™ç§å•çº¿ç¨‹å‹ç¼©ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ¨èä½¿ç”¨ &lt;code&gt;**pigz**&lt;/code&gt; &lt;strong&gt;ï¼ˆParallel Implementation of GZipï¼‰&lt;/strong&gt; ï¼Œ&lt;br&gt;
å®ƒæ˜¯ &lt;code&gt;gzip&lt;/code&gt; çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å¤šæ ¸ CPU è¿›è¡Œå‹ç¼©ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="äºŒtar-ä¸-pigz-çš„å…³ç³»ä¸å·¥ä½œæ–¹å¼"&gt;&lt;span&gt;äºŒã€tar ä¸ pigz çš„å…³ç³»ä¸å·¥ä½œæ–¹å¼&lt;/span&gt;
 &lt;a href="#%e4%ba%8ctar-%e4%b8%8e-pigz-%e7%9a%84%e5%85%b3%e7%b3%bb%e4%b8%8e%e5%b7%a5%e4%bd%9c%e6%96%b9%e5%bc%8f" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tar&lt;/code&gt; ä¸ &lt;code&gt;pigz&lt;/code&gt; å®é™…æ˜¯ä¸¤ä¸ªç‹¬ç«‹ç¨‹åºï¼š&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;ç¨‹åº&lt;/th&gt;
 &lt;th&gt;åŠŸèƒ½&lt;/th&gt;
 &lt;th&gt;æ˜¯å¦å¤šçº¿ç¨‹&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;tar&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;è´Ÿè´£æ‰“åŒ…ï¼ˆå°†å¤šä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ•°æ®æµï¼‰&lt;/td&gt;
 &lt;td&gt;âŒ å•çº¿ç¨‹&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;pigz&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;è´Ÿè´£å‹ç¼©ï¼ˆå°†æ•°æ®æµå‹ç¼©æˆ gzip æ ¼å¼ï¼‰&lt;/td&gt;
 &lt;td&gt;âœ… å¤šçº¿ç¨‹&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 class="heading-element" id="1-tar-çš„èŒè´£"&gt;&lt;span&gt;1ï¸âƒ£ tar çš„èŒè´£&lt;/span&gt;
 &lt;a href="#1-tar-%e7%9a%84%e8%81%8c%e8%b4%a3" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;tar&lt;/code&gt; çš„ä»»åŠ¡æ˜¯è¯»å–æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ•°æ®ï¼Œç„¶åè¾“å‡ºä¸€ä¸ª &lt;strong&gt;æœªå‹ç¼©çš„æ•°æ®æµ&lt;/strong&gt; ã€‚&lt;br&gt;
è¿™ä¸ªè¿‡ç¨‹å‡ ä¹ä¸æ¶‰åŠå¤æ‚è®¡ç®—ï¼Œä¸»è¦æ˜¯ I/O æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -cvf - /data&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡å‘½ä»¤ä¸ä¼šç”Ÿæˆæ–‡ä»¶ï¼Œè€Œæ˜¯å°†å½’æ¡£å†…å®¹è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ã€‚&lt;br&gt;
&lt;code&gt;-&lt;/code&gt; è¡¨ç¤ºâ€œå†™åˆ°æ ‡å‡†è¾“å‡ºâ€ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 class="heading-element" id="2-pigz-çš„èŒè´£"&gt;&lt;span&gt;2ï¸âƒ£ pigz çš„èŒè´£&lt;/span&gt;
 &lt;a href="#2-pigz-%e7%9a%84%e8%81%8c%e8%b4%a3" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;pigz&lt;/code&gt; ä»æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ¥æ”¶æ•°æ®æµï¼Œå¹¶å¯¹å…¶è¿›è¡Œå¹¶è¡Œå‹ç¼©ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pigz -p 4 &amp;gt; backup.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;-p 4&lt;/code&gt; è¡¨ç¤ºä½¿ç”¨ 4 ä¸ªçº¿ç¨‹è¿›è¡Œå‹ç¼©ã€‚&lt;br&gt;
å®ƒä¼šæ ¹æ® CPU æ ¸å¿ƒæ•°é‡è‡ªåŠ¨åˆ’åˆ†å‹ç¼©å—å¹¶å¹¶è¡Œè®¡ç®—ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 class="heading-element" id="3-äºŒè€…çš„ç»„åˆæµå¼ç®¡é“å‹ç¼©"&gt;&lt;span&gt;3ï¸âƒ£ äºŒè€…çš„ç»„åˆï¼šæµå¼ç®¡é“å‹ç¼©&lt;/span&gt;
 &lt;a href="#3-%e4%ba%8c%e8%80%85%e7%9a%84%e7%bb%84%e5%90%88%e6%b5%81%e5%bc%8f%e7%ae%a1%e9%81%93%e5%8e%8b%e7%bc%a9" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ Linux ç®¡é“ï¼ˆ &lt;code&gt;|&lt;/code&gt; ï¼‰æœºåˆ¶ï¼Œå¯ä»¥è®© &lt;code&gt;tar&lt;/code&gt; ä¸ &lt;code&gt;pigz&lt;/code&gt; åŒæ—¶å·¥ä½œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -cvf - /data | pigz -p 4 &amp;gt; /backup/backup.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œæ—¶çš„å¹¶è¡Œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tar: è¯»å–æ–‡ä»¶å¹¶æ‰“åŒ…æµå¼è¾“å‡º â”‚ ---&amp;gt; â”‚ pigz: å¤šçº¿ç¨‹å‹ç¼©æ•°æ®æµ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 (å•çº¿ç¨‹) (å¤šçº¿ç¨‹)1.2.3.4.&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tar&lt;/code&gt; ä¾ç„¶æ˜¯å•çº¿ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pigz&lt;/code&gt; ä½¿ç”¨ 4 ä¸ª CPU æ ¸ï¼›&lt;/li&gt;
&lt;li&gt;ç®¡é“æœºåˆ¶ä¿è¯ä¸¤è€…è¾¹è¯»è¾¹å‹ç¼©ã€æ— é¡»ä¸­é—´æ–‡ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;æ•´ä½“ CPU åˆ©ç”¨ç‡é«˜ã€å†…å­˜å ç”¨ä½ã€å‹ç¼©é€Ÿåº¦æ˜¾è‘—æå‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="ä¸‰ä¸ºä»€ä¹ˆ-tar-åªèƒ½ä½¿ç”¨ä¸€ä¸ª-cpu"&gt;&lt;span&gt;ä¸‰ã€ä¸ºä»€ä¹ˆ tar åªèƒ½ä½¿ç”¨ä¸€ä¸ª CPUï¼Ÿ&lt;/span&gt;
 &lt;a href="#%e4%b8%89%e4%b8%ba%e4%bb%80%e4%b9%88-tar-%e5%8f%aa%e8%83%bd%e4%bd%bf%e7%94%a8%e4%b8%80%e4%b8%aa-cpu" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tar&lt;/code&gt; æ˜¯ä¸€ç§å…¸å‹çš„â€œæµå¼å½’æ¡£â€å·¥å…·ï¼Œå®ƒé¡ºåºåœ°éå†æ–‡ä»¶ç³»ç»Ÿã€è¯»å–æ–‡ä»¶å¹¶å†™å…¥è¾“å‡ºæµã€‚&lt;br&gt;
è¿™ç§é¡ºåºå¤„ç†æ¨¡å¼çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯æ¬¡åªå¤„ç†ä¸€ä¸ªæ–‡ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;ä¸è¿›è¡Œå¤æ‚è¿ç®—ï¼›&lt;/li&gt;
&lt;li&gt;ä¸å…·å¤‡æ•°æ®å—åˆ’åˆ†ä¸å¹¶å‘å¤„ç†æœºåˆ¶ï¼›&lt;/li&gt;
&lt;li&gt;å¹¶å‘è¯»å–æ–‡ä»¶è¿˜å¯èƒ½ç ´åå½’æ¡£çš„é¡ºåºä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ§  ç»“è®ºï¼š &lt;code&gt;tar&lt;/code&gt; çš„æ ¸å¿ƒç“¶é¢ˆä¸æ˜¯ CPUï¼Œè€Œæ˜¯ç£ç›˜ I/Oã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å³ä½¿æœºå™¨æœ‰ 8 æ ¸ã€16 æ ¸ï¼Œ &lt;code&gt;tar&lt;/code&gt; è‡ªèº«ä»ç„¶åªä½¿ç”¨ 1 ä¸ªæ ¸å¿ƒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="å››å¦‚ä½•ä½¿ç”¨å¤šæ ¸è¿›è¡Œå‹ç¼©"&gt;&lt;span&gt;å››ã€å¦‚ä½•ä½¿ç”¨å¤šæ ¸è¿›è¡Œå‹ç¼©&lt;/span&gt;
 &lt;a href="#%e5%9b%9b%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e5%a4%9a%e6%a0%b8%e8%bf%9b%e8%a1%8c%e5%8e%8b%e7%bc%a9" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;h3 class="heading-element" id="-æ–¹æ¡ˆä¸€tar--pigzæ¨è"&gt;&lt;span&gt;âœ… æ–¹æ¡ˆä¸€ï¼štar + pigzï¼ˆæ¨èï¼‰&lt;/span&gt;
 &lt;a href="#-%e6%96%b9%e6%a1%88%e4%b8%80tar--pigz%e6%8e%a8%e8%8d%90" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;tar -cvf - /data | pigz -p 4 &amp;gt; /backup/backup.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;å‚æ•°&lt;/th&gt;
 &lt;th&gt;å«ä¹‰&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;-cvf -&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;æ‰“åŒ…å¹¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;pigz -p 4&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;ä½¿ç”¨ 4 ä¸ªçº¿ç¨‹å‹ç¼©&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;å°†å‹ç¼©åçš„æ•°æ®å†™å…¥ç›®æ ‡æ–‡ä»¶&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€§èƒ½ç‰¹å¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tar&lt;/code&gt; å ç”¨çº¦ 1 æ ¸ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pigz&lt;/code&gt; å ç”¨ 4 æ ¸ï¼›&lt;/li&gt;
&lt;li&gt;æ€»å…±åˆ©ç”¨ 5 æ ¸ï¼›&lt;/li&gt;
&lt;li&gt;å‹ç¼©é€Ÿåº¦é€šå¸¸æ˜¯å•çº¿ç¨‹ gzip çš„ 3~5 å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 class="heading-element" id="-æ–¹æ¡ˆäºŒtar-å†…ç½®è°ƒç”¨-pigzæ›´ç®€æ´"&gt;&lt;span&gt;âœ… æ–¹æ¡ˆäºŒï¼štar å†…ç½®è°ƒç”¨ pigzï¼ˆæ›´ç®€æ´ï¼‰&lt;/span&gt;
 &lt;a href="#-%e6%96%b9%e6%a1%88%e4%ba%8ctar-%e5%86%85%e7%bd%ae%e8%b0%83%e7%94%a8-pigz%e6%9b%b4%e7%ae%80%e6%b4%81" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;è®¸å¤š Linux å‘è¡Œç‰ˆçš„ &lt;code&gt;tar&lt;/code&gt; å·²æ”¯æŒç›´æ¥ä½¿ç”¨ &lt;code&gt;pigz&lt;/code&gt; æ›¿ä»£ &lt;code&gt;gzip&lt;/code&gt; ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar --use-compress-program=&amp;#34;pigz -p 4&amp;#34; -cvf /backup/backup.tar.gz /data&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç­‰ä»·äºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -cvf - /data | pigz -p 4 &amp;gt; /backup/backup.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘½ä»¤æ›´ç®€æ´ï¼›&lt;/li&gt;
&lt;li&gt;å½’æ¡£å’Œå‹ç¼©ç”± tar ç®¡ç†ï¼›&lt;/li&gt;
&lt;li&gt;åŒæ ·æ”¯æŒå¤šæ ¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 class="heading-element" id="-æ–¹æ¡ˆä¸‰è§£å‹æ—¶å¤šæ ¸è§£å‹"&gt;&lt;span&gt;âœ… æ–¹æ¡ˆä¸‰ï¼šè§£å‹æ—¶å¤šæ ¸è§£å‹&lt;/span&gt;
 &lt;a href="#-%e6%96%b9%e6%a1%88%e4%b8%89%e8%a7%a3%e5%8e%8b%e6%97%b6%e5%a4%9a%e6%a0%b8%e8%a7%a3%e5%8e%8b" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;åŒæ ·ï¼Œè§£å‹æ—¶ä¹Ÿå¯ä»¥åˆ©ç”¨å¤šæ ¸ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pigz -dc -p 4 /backup/backup.tar.gz | tar -xvf -&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…æ›´ç®€æ´çš„å½¢å¼ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar --use-compress-program=&amp;#34;pigz -dp 4&amp;#34; -xvf /backup/backup.tar.gz&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h2 class="heading-element" id="äº”æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹8-æ ¸-cpu"&gt;&lt;span&gt;äº”ã€æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹ï¼ˆ8 æ ¸ CPUï¼‰&lt;/span&gt;
 &lt;a href="#%e4%ba%94%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94%e7%a4%ba%e4%be%8b8-%e6%a0%b8-cpu" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;å·¥å…·&lt;/th&gt;
 &lt;th&gt;å‹ç¼©æ–¹å¼&lt;/th&gt;
 &lt;th&gt;CPUä½¿ç”¨&lt;/th&gt;
 &lt;th&gt;å‹ç¼©æ—¶é—´(18GBæ–‡ä»¶)&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;`tar&lt;/td&gt;
 &lt;td&gt;gzip`&lt;/td&gt;
 &lt;td&gt;å•çº¿ç¨‹&lt;/td&gt;
 &lt;td&gt;100% of 1 CPU&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;`tar&lt;/td&gt;
 &lt;td&gt;pigz -p 4`&lt;/td&gt;
 &lt;td&gt;å¤šçº¿ç¨‹ï¼ˆ4æ ¸ï¼‰&lt;/td&gt;
 &lt;td&gt;~400%&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;`tar&lt;/td&gt;
 &lt;td&gt;pigz -p 8`&lt;/td&gt;
 &lt;td&gt;å¤šçº¿ç¨‹ï¼ˆ8æ ¸ï¼‰&lt;/td&gt;
 &lt;td&gt;~800%&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ï¼ˆå®é™…é€Ÿåº¦å–å†³äºç£ç›˜ I/Oã€æ–‡ä»¶ç±»å‹ã€å‹ç¼©æ¯”ç­‰å› ç´ ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="å…­åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µ"&gt;&lt;span&gt;å…­ã€åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µ&lt;/span&gt;
 &lt;a href="#%e5%85%ad%e5%9c%a8%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83%e4%b8%ad%e7%9a%84%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;åœºæ™¯&lt;/th&gt;
 &lt;th&gt;æ¨èå‘½ä»¤&lt;/th&gt;
 &lt;th&gt;è¯´æ˜&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;4 æ ¸æœºå™¨&lt;/td&gt;
 &lt;td&gt;`tar -cvf - /data&lt;/td&gt;
 &lt;td&gt;pigz -p 3 &amp;gt; /backup/data.tar.gz`&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;8 æ ¸æœºå™¨&lt;/td&gt;
 &lt;td&gt;`tar -cvf - /data&lt;/td&gt;
 &lt;td&gt;pigz -p 6 &amp;gt; /backup/data.tar.gz`&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;è‡ªåŠ¨æ£€æµ‹ CPU&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;pigz -p $(($(nproc)-1))&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;è‡ªåŠ¨ä½¿ç”¨é™¤ 1 å¤–çš„å…¨éƒ¨ CPU&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="ä¸ƒæ€»ç»“"&gt;&lt;span&gt;ä¸ƒã€æ€»ç»“&lt;/span&gt;
 &lt;a href="#%e4%b8%83%e6%80%bb%e7%bb%93" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;é¡¹ç›®&lt;/th&gt;
 &lt;th&gt;tar&lt;/th&gt;
 &lt;th&gt;gzip&lt;/th&gt;
 &lt;th&gt;pigz&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;åŠŸèƒ½&lt;/td&gt;
 &lt;td&gt;æ‰“åŒ…&lt;/td&gt;
 &lt;td&gt;å‹ç¼©&lt;/td&gt;
 &lt;td&gt;å¤šçº¿ç¨‹å‹ç¼©&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;æ˜¯å¦å¤šçº¿ç¨‹&lt;/td&gt;
 &lt;td&gt;âŒ&lt;/td&gt;
 &lt;td&gt;âŒ&lt;/td&gt;
 &lt;td&gt;âœ…&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;å¯æ›¿ä»£ gzip&lt;/td&gt;
 &lt;td&gt;âŒ&lt;/td&gt;
 &lt;td&gt;âœ…&lt;/td&gt;
 &lt;td&gt;âœ…&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;æ¨èç”¨é€”&lt;/td&gt;
 &lt;td&gt;æ‰“åŒ…æ–‡ä»¶&lt;/td&gt;
 &lt;td&gt;å…¼å®¹è€ç³»ç»Ÿå‹ç¼©&lt;/td&gt;
 &lt;td&gt;ç°ä»£å¤šæ ¸ç¯å¢ƒå‹ç¼©&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ä¸ tar é…åˆæ–¹å¼&lt;/td&gt;
 &lt;td&gt;è¾“å‡ºåˆ°ç®¡é“&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;tar -czf&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;`tar&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 class="heading-element" id="ä¹ç»“è¯­"&gt;&lt;span&gt;ä¹ã€ç»“è¯­&lt;/span&gt;
 &lt;a href="#%e4%b9%9d%e7%bb%93%e8%af%ad" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;tar&lt;/code&gt; çš„ç“¶é¢ˆæ˜¯ I/Oï¼Œè€Œé CPUï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;pigz&lt;/code&gt; èƒ½æ˜¾è‘—æé«˜å‹ç¼©æ€§èƒ½ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;tar + pigz&lt;/code&gt; çš„ç»„åˆæ˜¯å¤§æ–‡ä»¶å¤‡ä»½çš„ä¸šç•Œæœ€ä½³å®è·µï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆç†æ§åˆ¶çº¿ç¨‹æ•°é‡ï¼ˆå¦‚ &lt;code&gt;-p 3&lt;/code&gt; æˆ– &lt;code&gt;-p $(nproc)-1&lt;/code&gt; ï¼‰å¯ä»¥åœ¨æ€§èƒ½ä¸ç³»ç»Ÿç¨³å®šæ€§é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>å­¦ä¹ è‹±è¯­æ‰“å¡</title><link>https://huang8604.github.io/posts/%E5%AD%A6%E4%B9%A0%E8%8B%B1%E8%AF%AD%E6%89%93%E5%8D%A1/</link><pubDate>Thu, 23 Oct 2025 09:15:02 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/%E5%AD%A6%E4%B9%A0%E8%8B%B1%E8%AF%AD%E6%89%93%E5%8D%A1/</guid><description>&lt;p&gt;ä½œä¸ºä¸€ç§è‹±è¯­çš„ä½¿ç”¨å·¥å…·,ç¬¬ä¸€è¦å¬æ‡‚,ç¬¬äºŒè¦ä¼šè¯´.ç¬¬ä¸‰è¦çœ‹æ‡‚&lt;/p&gt;
&lt;h3 class="heading-element" id="èƒŒå•è¯"&gt;&lt;span&gt;èƒŒå•è¯&lt;/span&gt;
 &lt;a href="#%e8%83%8c%e5%8d%95%e8%af%8d" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·,èƒŒå•è¯.4-6çº§æ—¥å¸¸è¶³å¤Ÿ.&lt;br&gt;
ç™¾è¯æ–©ç”¨èµ·æ¥&lt;br&gt;
&lt;a class="lightgallery" target="_blank" href="https://picgo.myjojo.fun:666/i/2025/11/08/690e9f3ee8e8d.jpg" title="753ae8b37e4bc309fc84ecf8773473ba.jpg" data-thumbnail="https://picgo.myjojo.fun:666/i/2025/11/08/690e9f3ee8e8d.jpg" data-sub-html="&lt;h2&gt;753ae8b37e4bc309fc84ecf8773473ba.jpg&lt;/h2&gt;"&gt;&lt;img loading="lazy" src='https://picgo.myjojo.fun:666/i/2025/11/08/690e9f3ee8e8d.jpg' alt="753ae8b37e4bc309fc84ecf8773473ba.jpg"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 class="heading-element" id="å¬"&gt;&lt;span&gt;å¬&lt;/span&gt;
 &lt;a href="#%e5%90%ac" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;èµ°éç¾å›½ å¤šå¬&lt;/p&gt;
&lt;h3 class="heading-element" id="è¯´"&gt;&lt;span&gt;è¯´&lt;/span&gt;
 &lt;a href="#%e8%af%b4" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;AI Chart&lt;/p&gt;
&lt;h3 class="heading-element" id="è¯»"&gt;&lt;span&gt;è¯»&lt;/span&gt;
 &lt;a href="#%e8%af%bb" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;h3 class="heading-element" id="å†™"&gt;&lt;span&gt;å†™&lt;/span&gt;
 &lt;a href="#%e5%86%99" class="heading-mark"&gt;
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"&gt;&lt;/path&gt;&lt;/svg&gt;
 &lt;/a&gt;
&lt;/h3&gt;&lt;p&gt;è‹±è¯­è§„åˆ’&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;èƒŒå•è¯ ç™¾è¯æ–© &amp;ndash; ç†Ÿæ‚‰å•è¯ 100å¤©&lt;br&gt;
-&amp;ndash; ç™¾è¯æ–©ä¸€è½®å,ä½¿ç”¨å¢¨å¢¨èƒŒå•è¯,åŠ æ·±è®°å¿†.&lt;br&gt;
-&amp;ndash; å¢¨å¢¨ä¸€è½®å,ç»§ç»­ä½¿ç”¨å¢¨å¢¨èƒŒ6çº§å•è¯&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¬è¯´ æŠ¥ç™¾è¯æ–©çš„å¬è¯´è¯¾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¬èµ°éç¾å›½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†™å•è¯&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>æ€»ç»“ åˆ¤æ–­uwbæœåŠ¡å¯åŠ¨é—®é¢˜</title><link>https://huang8604.github.io/posts/%E6%80%BB%E7%BB%93-%E5%88%A4%E6%96%ADuwb%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/</link><pubDate>Thu, 23 Oct 2025 04:06:12 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/%E6%80%BB%E7%BB%93-%E5%88%A4%E6%96%ADuwb%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/</guid><description>&lt;p&gt;æœ‰ä¸€ä¸ªé—®é¢˜,å°±æ˜¯é…ç½®äº†uwb,å¦‚æœåœ¨æ²¡æœ‰uwbçš„æœºå™¨ä¸Š,ä¼šä¸åœçš„å¯åŠ¨uwbçš„æœåŠ¡.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;09-29 10:19:45.885 1 1 E init : Control message: Could not find &amp;#39;aidl/android.hardware.uwb.IUwb/default&amp;#39; for ctl.interface_start from pid: 441 (/system/bin/servicemanager)
09-29 10:19:45.942 441 29301 W libc : Unable to set property &amp;#34;ctl.interface_start&amp;#34; to &amp;#34;aidl/android.hardware.uwb.IUwb/default&amp;#34;: PROP_ERROR_HANDLE_CONTROL_MESSAGE (0x20)
09-29 10:19:45.948 1725 4002 W ServiceManagerCppClient: Waited one second for android.hardware.uwb.IUwb/default (is service started? Number of threads started in the threadpool: 32. Are binder threads started and available?)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç½‘ç»œä¸Šçš„ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ¡ˆ:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
static bool HandleControlMessage(std::string_view message, const std::string&amp;amp; name,pid_t from_pid) {
&amp;#43; if(&amp;#34;aidl/android.hardware.biometrics.fingerprint.IFingerprint/default&amp;#34; == name){
&amp;#43; return true;
&amp;#43; }

std::string cmdline_path = StringPrintf(&amp;#34;proc/%d/cmdline&amp;#34;, from_pid);
 std::string process_cmdline;
 if (ReadFileToString(cmdline_path, &amp;amp;process_cmdline)) {
 std::replace(process_cmdline.begin(), process_cmdline.end(), &amp;#39;\0&amp;#39;, &amp;#39; &amp;#39;);
 process_cmdline = Trim(process_cmdline);
 } else {
 process_cmdline = &amp;#34;unknown process&amp;#34;;
 }
}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‚£ä¹ˆè¿›è¿‡éªŒè¯,å¯¹uwbæ²¡æœ‰ä½œç”¨.&lt;br&gt;
è¿›è¿‡è°ƒè¯•,å¦‚æœæŠŠæ”¯æŒuwb çš„featureåˆ é™¤, ç¡®è®¤æœåŠ¡æ˜¯ä¸ä¼šå¯åŠ¨çš„.æ‰€ä»¥æˆ‘ä»¬åœ¨pmsé‡Œå¢åŠ çš„æ‰“å°å †æ ˆ&lt;/p&gt;
&lt;p&gt;é€šè¿‡å †æ ˆ,æˆ‘ä»¬å‘ç°æ˜¯åœ¨SystemServerä¸­&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; /**
 * Starts a miscellaneous grab bag of stuff that has yet to be refactored and organized.
 */
 private void startOtherServices(@NonNull TimingsTraceAndSlog t) {
 t.traceBegin(&amp;#34;startOtherServices&amp;#34;);

 if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_UWB)) {
 t.traceBegin(&amp;#34;UwbService&amp;#34;);
 mSystemServiceManager.startServiceFromJar(UWB_SERVICE_CLASS, UWB_APEX_SERVICE_JAR_PATH);
 t.traceEnd();
 }&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬çš„ä¿®æ”¹æ–¹æ¡ˆå°±æ˜¯åœ¨æ²¡æœ‰uwbçš„æœºå™¨ä¸Š,å¦‚æœéœ€è¦è·å–hasSystemFeatureçš„åœ°æ–¹,ç»™è¿”å›false.&lt;/p&gt;
&lt;p&gt;frameworks/base/services/core/java/com/android/server/pm/PackageManagerService.java&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
 public boolean hasSystemFeature(String name, int version) {
 // allow instant applications

 if(&amp;#34;android.hardware.uwb&amp;#34;.equals(name)) {
 //Log.d(&amp;#34;PackageManagerService wentao&amp;#34;, &amp;#34;wentao hasSystemFeature uwb&amp;#34; &amp;#43;Log.getStackTraceString(new Throwable()));

 //getprop ro.hw.mcu.mac
 String mcuMac = SystemProperties.get(&amp;#34;ro.hw.mcu.mac&amp;#34;, &amp;#34;(unknown)&amp;#34;);
 Log.d(&amp;#34;PackageManagerService&amp;#34;, &amp;#34;mcuMac: &amp;#34; &amp;#43; mcuMac);
 if(&amp;#34;(unknown)&amp;#34;.equals(mcuMac)) {
 return false;
 }else{
 return true;
 }
 }&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¿™ä¸ªåˆ¤æ–­uwbçš„åˆ¤æ–­æ¡ä»¶ä¸€å®šè¦åœ¨systemserver startOtherServices ä¹‹å‰,ä¸ç„¶æ—¶åºä¸å¯¹.&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>å¼€æœºæ—¶æç¤º your device is corruptï¼Ÿ</title><link>https://huang8604.github.io/posts/%E5%BC%80%E6%9C%BA%E6%97%B6%E6%8F%90%E7%A4%BA-your-device-is-corrupt/</link><pubDate>Thu, 11 Sep 2025 01:46:50 +0000</pubDate><author>huang8604@163.com (wentao)</author><guid>https://huang8604.github.io/posts/%E5%BC%80%E6%9C%BA%E6%97%B6%E6%8F%90%E7%A4%BA-your-device-is-corrupt/</guid><description>&lt;p&gt;&lt;a href="https://huang8604.github.io/avb%E6%A0%A1%E9%AA%8C%E7%9B%B8%E5%85%B3%E4%B8%8E%E5%9D%97%E6%A0%A1%E9%AA%8C%E5%8E%9F%E7%90%86"&gt;avbæ ¡éªŒç›¸å…³ä¸å—æ ¡éªŒåŸç†&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;adb reboot recovery
adb root
adb shell
reboot &amp;#34;dm-verity enforcing&amp;#34;&lt;/code&gt;&lt;/pre&gt;</description></item></channel></rss>